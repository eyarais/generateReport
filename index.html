<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูููุฏ ุชูุฑูุฑ ูููู </title>
    <link href="style.css" rel="stylesheet" />

</head>

<body>

    <h1>๐ธ ูููุฏ ุชูุฑูุฑ ูููู ๐ธ</h1>
    <div id="container" class="section">
        <h2> ูุคูุช ูุชุณููุน</h2>
        <div id="timer">00:00:00</div>
        <div>
            <button onclick="startTimer()">ุจุฏุฃ</button>
            <button onclick="pauseTimer()">ุงููุงู</button>
            <button onclick="resetTimer()">ุชุตููุฑ</button>
        </div>
    </div>


    <div class="section">
        <label>
            ุชุถููู โ๏ธ ูุฑุฏ ุงูุญูุธ:
            <input type="checkbox" id="include-hifz" checked>
        </label>
    </div>

    <div class="section">
        <label>
            ุชุถููู โ๏ธ ูุฑุฏ ุงูุชุฑุงููู:
            <input type="checkbox" id="include-cumulative" checked>
        </label>
    </div>

    <div class="section" id="hifz-section">
        <h2>โ๏ธ ูุฑุฏ ุงูุญูุธ</h2>
        <label>ุงุณู ุงูุณูุฑุฉ: <input type="text" id="hifz-surah" placeholder="ุงูุชุจ ุงุณู ุงูุณูุฑุฉ"></label>
        <label>ูุฏุฉ ุงูุชุณุฌูู: <input type="text" id="hifz-duration" placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label>
        <label>ุนุฏุฏ ุงูุชูุฑุงุฑ: <input type="number" id="hifz-repetition" value="10"></label>
        <label>ุนุฏุฏ ุงูุฃุฎุทุงุก: <input type="number" id="hifz-errors" value="0"></label>
        <label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช: <input type="number" id="hifz-frequency" value="0"></label>
    </div>

    <div class="section" id="cumulative-section">
        <h2>โ๏ธ ูุฑุฏ ุงูุชุฑุงููู</h2>
        <label>ูุฏุฉ ุงูุชุณุฌูู: <input type="text" id="cumulative-duration" placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label>
        <label>ุงูุชูุฑุงุฑ: <input type="number" id="cumulative-repetition" value="10"></label>
        <label>ุนุฏุฏ ุงูุฃุฎุทุงุก: <input type="number" id="cumulative-errors" value="0"></label>
        <label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช: <input type="number" id="cumulative-frequency" value="0"></label>
    </div>

    <div class="section">
        <h2>โ๏ธ ูุฑุฏ ุงูุชุณููุน</h2>
        <label>ูุฏุฉ ุงูุชุณููุน: <input type="text" id="tasmi3-duration" placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label>
        <label>ุชู ุงูุณูุงุน ูู: <input type="text" id="tasmi3-person" value="ุณูุนุช ุนูู ุงุฎุชู ุงููุฑุงููุฉ"></label>
        <h3>ุงูุณูุฑ</h3>
        <div id="surahs">
            <!-- Add surahs dynamically -->
        </div>
    </div>

    <div class="section">
        <h2>๐ ุงูููุงู ุงูุฃุฎุฑู</h2>
        <label>ูุฑุฏ ุงูุฎุชูุฉ ุงูุดูุฑูุฉ:
            <input type="radio" name="monthly-completion" value="ุชู" checked> ุชู
            <input type="radio" name="monthly-completion" value="ูู ูุชู"> ูู ูุชู
        </label>
        <label>ุงูุชุญุถูุฑ ุงููุจูู:
            <input type="radio" name="preparation" value="ุชู" checked> ุชู
            <input type="radio" name="preparation" value="ูู ูุชู"> ูู ูุชู
        </label>
        <label>ูุฑุฏ ุงูุชูุณูุฑ:
            <input type="radio" name="tafseer" value="ุชู" checked> ุชู
            <input type="radio" name="tafseer" value="ูู ูุชู"> ูู ูุชู
        </label>
        <label>ูุฑุฏ ุงูุฃุฐูุงุฑ:
            <input type="radio" name="athkar" value="ุชู" checked> ุชู
            <input type="radio" name="athkar" value="ูู ูุชู"> ูู ูุชู
        </label>
        <label>ูุฑุฏ ุงููุญุฑุงุจ:
            <input type="radio" name="mihrab" value="ุชู" checked> ุชู
            <input type="radio" name="mihrab" value="ูู ูุชู"> ูู ูุชู
        </label>
    </div>

    <button onclick="handleButtonClick()">ุฅูุดุงุก ุงูุชูุฑูุฑ ููุณุฎู</button>


    <div id="output" class="output hidden">
        <textarea id="copy-field" readonly></textarea>
    </div>
    <script>

        function decrementValue(index, type) {
            const input = document.querySelector(`.${type}[data-index="${index}"]`);
            if (input) {
                input.value = Math.max(0, parseInt(input.value) - 1);
            }
        }

        function incrementValue(index, type) {
            const input = document.querySelector(`.${type}[data-index="${index}"]`);
            if (input) {
                input.value = parseInt(input.value) + 1;
            }
        }

        let timerInterval;
        let elapsedTime = 0; // Time in seconds
        let isRunning = false;

        // Update the timer display
        function updateTimerDisplay() {
            const hours = String(Math.floor(elapsedTime / 3600)).padStart(2, '0');
            const minutes = String(Math.floor((elapsedTime % 3600) / 60)).padStart(2, '0');
            const seconds = String(elapsedTime % 60).padStart(2, '0');
            document.getElementById('timer').textContent = `${hours}:${minutes}:${seconds}`;
        }

        // Start the timer
        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(() => {
                    elapsedTime++;
                    updateTimerDisplay();
                }, 1000);
            }
        }
        //pause 
        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);

            // Update the pause field with the current timer value
            const hours = String(Math.floor(elapsedTime / 3600)).padStart(2, '0');
            const minutes = String(Math.floor((elapsedTime % 3600) / 60)).padStart(2, '0');
            const seconds = String(elapsedTime % 60).padStart(2, '0');
            document.getElementById('tasmi3-duration').value = `${hours}:${minutes}:${seconds}`;
        }

        // Reset the timer
        function resetTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            elapsedTime = 0;
            updateTimerDisplay();
        }

        // Initialize the timer display
        updateTimerDisplay();



        // Initialize the timer display
        updateTimerDisplay();

        ///////******* end timerrrrrrrrrrrrrrrrr*******////////
        // List of Surahs
        // List of Surahs
        const surahs = [
            { name: "ุณูุฑุฉ ู", juz: "ุฌุฒุก 27" },
            { name: "ุณูุฑุฉ ุงูุฐุงุฑูุงุช", juz: "ุฌุฒุก 27" },
            { name: "ุณูุฑุฉ ุงูุทูุฑ", juz: "ุฌุฒุก 27" },
            { name: "ุณูุฑุฉ ุงููุฌู", juz: "ุฌุฒุก 27" },
            { name: "ุณูุฑุฉ ุงูููุฑ", juz: "ุฌุฒุก 27" },
            { name: "ุณูุฑุฉ ุงูุฑุญูุงู", juz: "ุฌุฒุก 27" },
            { name: "ุณูุฑุฉ ุงููุงูุนุฉ", juz: "ุฌุฒุก 27" },
            { name: "ุณูุฑุฉ ุงูุญุฏูุฏ", juz: "ุฌุฒุก 27" },
            { name: "ุณูุฑุฉ ุงููุฌุงุฏูุฉ", juz: "ุฌุฒุก 28" },
            { name: "ุณูุฑุฉ ุงูุญุดุฑ", juz: "ุฌุฒุก 28" },
            { name: "ุณูุฑุฉ ุงูููุชุญูุฉ", juz: "ุฌุฒุก 28" },
            { name: "ุณูุฑุฉ ุงูุตู", juz: "ุฌุฒุก 28" },
            { name: "ุณูุฑุฉ ุงูุฌูุนุฉ", juz: "ุฌุฒุก 28" },
            { name: "ุณูุฑุฉ ุงูููุงูููู", juz: "ุฌุฒุก 28" },
            { name: "ุณูุฑุฉ ุงูุชุบุงุจู", juz: "ุฌุฒุก 28" },
            { name: "ุณูุฑุฉ ุงูุทูุงู", juz: "ุฌุฒุก 28" },
            { name: "ุณูุฑุฉ ุงูุชุญุฑูู", juz: "ุฌุฒุก 28" }
        ];


        // Group surahs by juz
        const parts = [];
        surahs.forEach(surah => {
            const juz = surah.juz || "ุบูุฑ ูุญุฏุฏ";  // If juz is null, label as "ุบูุฑ ูุญุฏุฏ"
            let part = parts.find(p => p.name === juz);
            if (!part) {
                part = { name: juz, suras: [] };
                parts.push(part);
            }
            part.suras.push(surah.name);
        });


        function calculateMistakesByJuzAndFrequencies() {
            const mistakesByJuz = {};
            const frequenciesByJuz = {};

            // Loop through surahs to calculate mistakes and frequencies
            surahs.forEach((surah, index) => {
                const errors = parseInt(document.querySelectorAll('.errors')[index]?.value || 0);
                const frequencies = parseInt(document.querySelectorAll('.frequencies')[index]?.value || 0);

                if (surah.juz) {
                    // Initialize `juz` if not already present
                    if (!mistakesByJuz[surah.juz]) {
                        mistakesByJuz[surah.juz] = 0;
                        frequenciesByJuz[surah.juz] = 0;
                    }

                    // Accumulate errors and frequencies
                    mistakesByJuz[surah.juz] += errors;
                    frequenciesByJuz[surah.juz] += frequencies;
                }
            });

            // Combine mistakes and frequencies into one object
            const statsByJuz = {};
            for (const juz in mistakesByJuz) {
                statsByJuz[juz] = {
                    mistakes: mistakesByJuz[juz],
                    frequencies: frequenciesByJuz[juz],
                };
            }

            return statsByJuz;
        }




        const surahContainer = document.getElementById('surahs');

        surahs.forEach((surah, index) => {
            const surahDiv = document.createElement('div');
            surahDiv.innerHTML = `
       <h4>${surah.name}:</h4>
       <label>
         ุนุฏุฏ ุงูุฃุฎุทุงุก: 
         <div style="display: flex; align-items: center; gap: 5px;">
           <button type="button" class="small-button" onclick="decrementValue(${index}, 'errors')">-</button>
           <input type="number" class="errors small-input" data-index="${index}" value="0" min="0">
           <button type="button" class="small-button" onclick="incrementValue(${index}, 'errors')">+</button>
         </div>
       </label>
       <label>
         ุนุฏุฏ ุงูุชุฑุฏุฏุงุช: 
         <div style="display: flex; align-items: center; gap: 5px;">
           <button type="button" class="small-button" onclick="decrementValue(${index}, 'frequencies')">-</button>
           <input type="number" class="frequencies small-input" data-index="${index}" value="0" min="0">
           <button type="button" class="small-button" onclick="incrementValue(${index}, 'frequencies')">+</button>
         </div>
       </label>
   `;
            surahContainer.appendChild(surahDiv);
        });


        document.getElementById('include-hifz').addEventListener('change', function () {
            document.getElementById('hifz-section').classList.toggle('hidden', !this.checked);
        });

        document.getElementById('include-cumulative').addEventListener('change', function () {
            document.getElementById('cumulative-section').classList.toggle('hidden', !this.checked);
        });

        // Show sections on page load if checked
        window.onload = function () {
            if (document.getElementById('include-hifz').checked) {
                document.getElementById('hifz-section').classList.remove('hidden');
            }

            if (document.getElementById('include-cumulative').checked) {
                document.getElementById('cumulative-section').classList.remove('hidden');
            }
        };

        async function generateReport() {
            const dayName = new Date().toLocaleDateString('ar-EG', { weekday: 'long' });
            let output = `๐ธ ุชูุฑูุฑ ููู ${dayName} ๐ธ\n\n`;

            if (document.getElementById('include-hifz').checked) {
                output += `โ๏ธ ูุฑุฏ ุงูุญูุธ:\n`;
                output += `\tุงุณู ุงูุณูุฑุฉ: ${document.getElementById('hifz-surah').value}\n`;
                output += `\tูุฏุฉ ุงูุชุณุฌูู: ${document.getElementById('hifz-duration').value}\n`;
                output += `\tุนุฏุฏ ุงูุชูุฑุงุฑ: ${document.getElementById('hifz-repetition').value}\n`;
                output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${document.getElementById('hifz-errors').value}\n`;
                output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${document.getElementById('hifz-frequency').value}\n\n`;
            }

            if (document.getElementById('include-cumulative').checked) {
                output += `โ๏ธ ูุฑุฏ ุงูุชุฑุงููู:\n`;
                output += `\tูุฏุฉ ุงูุชุณุฌูู: ${document.getElementById('cumulative-duration').value}\n`;
                output += `\tุงูุชูุฑุงุฑ: ${document.getElementById('cumulative-repetition').value}\n`;
                output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${document.getElementById('cumulative-errors').value}\n`;
                output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${document.getElementById('cumulative-frequency').value}\n\n`;
            }

            output += `โ๏ธ ูุฑุฏ ุงูุชุณููุน:\n`;
            output += `\tูุฏุฉ ุงูุชุณููุน: ${document.getElementById('tasmi3-duration').value}\n`;
            output += `\tุชู ุงูุณูุงุน ูู: ${document.getElementById('tasmi3-person').value}\n`;

            // Calculate mistakes by ุฌุฒุก
            const mistakesByJuz = { "ุฌุฒุก 1": 0, "ุฌุฒุก 2": 0 };

            surahs.forEach((surah, index) => {
                const errors = parseInt(document.querySelectorAll('.errors')[index].value) || 0;
                const frequencies = document.querySelectorAll('.frequencies')[index].value;

                // Add surah details to the output
                output += `\t๐ ${surah.name}:\n`;
                output += `\t\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${errors}\n`;
                output += `\t\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${frequencies}\n\n`;

                // Accumulate mistakes by ุฌุฒุก
                if (surah.juz) {
                    mistakesByJuz[surah.juz] += errors;
                }
            });

            // Add mistakes by ุฌุฒุก to the report
            // Add mistakes and frequencies by Juz to the report
            const statsByJuz = calculateMistakesByJuzAndFrequencies();
            output += `๐ ุฅุญุตุงุฆูุงุช ุญุณุจ ุงูุฌุฒุก:\n`;

            for (const [juz, stats] of Object.entries(statsByJuz)) {
                output += `\t${juz}:\n`;
                output += `\t\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${stats.mistakes}\n`;
                output += `\t\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${stats.frequencies}\n`;
            }


            output += `\n๐ ุงูููุงู ุงูุฃุฎุฑู:\n`;
            output += `\tูุฑุฏ ุงูุฎุชูุฉ ุงูุดูุฑูุฉ: ${document.querySelector('input[name="monthly-completion"]:checked').value}\n`;
            output += `\tุงูุชุญุถูุฑ ุงููุจูู: ${document.querySelector('input[name="preparation"]:checked').value}\n`;
            output += `\tูุฑุฏ ุงูุชูุณูุฑ: ${document.querySelector('input[name="tafseer"]:checked').value}\n`;
            output += `\tูุฑุฏ ุงูุฃุฐูุงุฑ: ${document.querySelector('input[name="athkar"]:checked').value}\n`;
            output += `\tูุฑุฏ ุงููุญุฑุงุจ: ${document.querySelector('input[name="mihrab"]:checked').value}\n`;
            output += `\tุงูุญูุฏ ููู ุงูุฐู ูุณุฑ ูุงุนุงู ๐ฅฐ\n`;
            // Update the output field and make it visible
            const copyField = document.getElementById('copy-field');
            copyField.value = output;
            document.getElementById('output').classList.remove('hidden');
        }


        function copyToClipboard() {
            const copyField = document.getElementById('copy-field');
            copyField.select();
            document.execCommand('copy');
            alert('ุชู ูุณุฎ ุงูุชูุฑูุฑ ุฅูู ุงูุญุงูุธุฉ!');
        }
        // Handle button click
        async function handleButtonClick() {
            await generateReport(); // Wait for report generation to complete
            copyToClipboard(); // Copy to clipboard after completion
        }

    </script>
    <footer>
        <footer>
            <p>ยฉ 2025 ุจุฑูุฌุฉ ุงูุทูููุจุฉ <strong>ุขูุฉ ุงูุฑุงูุณ </strong>ุบูุฑ ุงููู ููุง.</p>
        </footer>

    </footer>
</body>

</html>