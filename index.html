<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ„Ø¯ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ ÙÙŠ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¹Ø·Ø§Ø¡ </title>
    <link href="style.css" rel="stylesheet" />

</head>

<body>

    <h1>ğŸŒ¸ Ù…ÙˆÙ„Ø¯ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ ğŸŒ¸</h1>
    <div id="container" class="section">
        <h2> Ù…Ø¤Ù‚Øª Ù„ØªØ³Ù…ÙŠØ¹</h2>
        <div id="timer">00:00:00</div>
        <div>
            <button onclick="startTimer()">Ø¨Ø¯Ø£</button>
            <button onclick="pauseTimer()">Ø§ÙŠÙ‚Ø§Ù</button>
            <button onclick="resetTimer()">ØªØµÙÙŠØ±</button>
        </div>
    </div>


    <div class="section-toggle">
        <button id="toggle-selection" onclick="toggleSelection()">ğŸ“– Ø§Ø®ØªØ± Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ§Ù„Ø³ÙˆØ±</button>
    </div>

    <div id="selection-section" class="hidden">
        <div class="section">
            <h2>ğŸŒ™ Ø§Ø®ØªØ± Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ§Ù„Ø³ÙˆØ±</h2>
            <div id="parts-container" class="parts-container">
                <!-- Juz and Surah dropdowns will be dynamically populated here -->
            </div>
        </div>
    </div>



    <div class="section">
        <label>
            ØªØ¶Ù…ÙŠÙ† â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„Ø­ÙØ¸:
            <input type="checkbox" id="include-hifz" checked>
        </label>
    </div>

    <div class="section">
        <label>
            ØªØ¶Ù…ÙŠÙ† â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ:
            <input type="checkbox" id="include-cumulative" checked>
        </label>
    </div>

    <div class="section" id="hifz-section">
        <h2>â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„Ø­ÙØ¸</h2><label>Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©: <input type="text" id="hifz-surah"
                placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©"></label><label>Ù…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: <input type="text" id="hifz-duration"
                placeholder="Ø³Ø§Ø¹Ø§Øª ÙˆØ¯Ù‚Ø§Ø¦Ù‚"></label><label>Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: <input type="number" id="hifz-repetition"
                value="10"></label><label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: <input type="number" id="hifz-errors"
                value="0"></label><label>Ø¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: <input type="number" id="hifz-frequency" value="0"></label>
    </div>
    <div class="section" id="cumulative-section">
        <h2>â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</h2><label>Ù…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: <input type="text" id="cumulative-duration"
                placeholder="Ø³Ø§Ø¹Ø§Øª ÙˆØ¯Ù‚Ø§Ø¦Ù‚"></label><label>Ø§Ù„ØªÙƒØ±Ø§Ø±: <input type="number" id="cumulative-repetition"
                value="10"></label><label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: <input type="number" id="cumulative-errors"
                value="0"></label><label>Ø¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: <input type="number" id="cumulative-frequency" value="0"></label>
    </div>
    <div class="section" id="ghaybi-section">
        <h2>â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØºÙŠØ¨ÙŠ</h2>
        <label>Ù…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: <input type="text" id="ghaybi-duration" placeholder="Ø³Ø§Ø¹Ø§Øª ÙˆØ¯Ù‚Ø§Ø¦Ù‚"></label>
        <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: <input type="number" id="ghaybi-errors" value="0"></label>
        <label id="errors-surah-label" style="display: none;">Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø© : <input type="text"
                id="ghaybi-errors-surah"></label>
        <label>Ø¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: <input type="number" id="ghaybi-frequency" value="0"></label>
        <label id="frequency-surah-label" style="display: none;">Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø© : <input type="text"
                id="ghaybi-frequency-surah"></label>
    </div>
    <div class="section">
        <h2>â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ³Ù…ÙŠØ¹</h2><label>Ù…Ø¯Ø© Ø§Ù„ØªØ³Ù…ÙŠØ¹: <input type="text" id="tasmi3-duration"
                placeholder="Ø³Ø§Ø¹Ø§Øª ÙˆØ¯Ù‚Ø§Ø¦Ù‚"></label><label>ØªÙ… Ø§Ù„Ø³Ù…Ø§Ø¹ Ù„Ù€: <input type="text" id="tasmi3-person"
                value="Ø³Ù…Ø¹Øª Ø¹Ù„Ù‰ Ø§Ø®ØªÙŠ Ø§Ù„Ù‚Ø±Ø§Ù†ÙŠØ©"></label>
        <h3>Ø§Ù„Ø³ÙˆØ±</h3>
        <div id="selected-details">
            <!-- Selected Surah/Juz details will appear here -->
        </div>
    </div>


    <div class="section">
        <h2>ğŸ’ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰</h2><label>ÙˆØ±Ø¯ Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©: <input type="radio" name="monthly-completion" value="ØªÙ…"
                checked>ØªÙ… <input type="radio" name="monthly-completion" value="Ù„Ù… ÙŠØªÙ…">Ù„Ù… ÙŠØªÙ… </label><label>Ø§Ù„ØªØ­Ø¶ÙŠØ±
            Ø§Ù„Ù‚Ø¨Ù„ÙŠ: <input type="radio" name="preparation" value="ØªÙ…" checked>ØªÙ… <input type="radio" name="preparation"
                value="Ù„Ù… ÙŠØªÙ…">Ù„Ù… ÙŠØªÙ… </label><label>ÙˆØ±Ø¯ Ø§Ù„ØªÙØ³ÙŠØ±: <input type="radio" name="tafseer" value="ØªÙ…"
                checked>ØªÙ… <input type="radio" name="tafseer" value="Ù„Ù… ÙŠØªÙ…">Ù„Ù… ÙŠØªÙ… </label><label>ÙˆØ±Ø¯ Ø§Ù„Ø£Ø°ÙƒØ§Ø±: <input
                type="radio" name="athkar" value="ØªÙ…" checked>ØªÙ… <input type="radio" name="athkar" value="Ù„Ù… ÙŠØªÙ…">Ù„Ù… ÙŠØªÙ…
        </label><label>ÙˆØ±Ø¯ Ø§Ù„Ù…Ø­Ø±Ø§Ø¨: <input type="radio" name="mihrab" value="ØªÙ…" checked>ØªÙ… <input type="radio"
                name="mihrab" value="Ù„Ù… ÙŠØªÙ…">Ù„Ù… ÙŠØªÙ… </label>
    </div><button onclick="handleButtonClick()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙˆÙ†Ø³Ø®Ù‡</button>
    <div id="output" class="output hidden"><textarea id="copy-field" readonly></textarea></div>

    <script>
        // List of Surahs
        const surahs = [{ name: "Ø³ÙˆØ±Ø© Ù‚", juz: "Ø¬Ø²Ø¡ 27" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª", juz: "Ø¬Ø²Ø¡ 27" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø·ÙˆØ±", juz: "Ø¬Ø²Ø¡ 27" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø¬Ù…", juz: "Ø¬Ø²Ø¡ 27" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ù…Ø±", juz: "Ø¬Ø²Ø¡ 27" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø±Ø­Ù…Ø§Ù†", juz: "Ø¬Ø²Ø¡ 27" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©", juz: "Ø¬Ø²Ø¡ 27" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø¯ÙŠØ¯", juz: "Ø¬Ø²Ø¡ 27" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø´Ø±", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØµÙ", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¬Ù…Ø¹Ø©", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØªØºØ§Ø¨Ù†", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø§Ù‚", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØªØ­Ø±ÙŠÙ…", juz: "Ø¬Ø²Ø¡ 28" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ù„Ù…", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù‚Ø©", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ù†ÙˆØ­", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¬Ù†", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø²Ù…Ù„", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¯Ø«Ø±", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚ÙŠØ§Ù…Ø©", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ù†Ø³Ø§Ù†", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª", juz: "Ø¬Ø²Ø¡ 29" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø¨Ø£", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø¹Ø¨Ø³", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØªÙƒÙˆÙŠØ±", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ù†ÙØ·Ø§Ø±", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø·ÙÙÙŠÙ†", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø·Ø§Ø±Ù‚", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø¹Ù„Ù‰", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØºØ§Ø´ÙŠØ©", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ÙØ¬Ø±", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù„Ø¯", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ù…Ø³", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù„ÙŠÙ„", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¶Ø­Ù‰", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ø±Ø­", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠÙ†", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ù„Ù‚", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ø¯Ø±", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨ÙŠÙ†Ø©", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø²Ù„Ø²Ù„Ø©", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØªÙƒØ§Ø«Ø±", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¹ØµØ±", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‡Ù…Ø²Ø©", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ÙÙŠÙ„", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ù‚Ø±ÙŠØ´", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙˆØ«Ø±", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†ØµØ±", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø³Ø¯", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„ÙÙ„Ù‚", juz: "Ø¬Ø²Ø¡ 30" },
        { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø³", juz: "Ø¬Ø²Ø¡ 30" }
        ];

        const errorsInput = document.getElementById('ghaybi-errors');
        const frequencyInput = document.getElementById('ghaybi-frequency');
        const errorsSurahLabel = document.getElementById('errors-surah-label');
        const frequencySurahLabel = document.getElementById('frequency-surah-label');

        // Function to toggle the visibility of the "Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©" fields
        function toggleSurahFields() {
            if (errorsInput.value > 0) {
                errorsSurahLabel.style.display = 'block';
            } else {
                errorsSurahLabel.style.display = 'none';
            }

            if (frequencyInput.value > 0) {
                frequencySurahLabel.style.display = 'block';
            } else {
                frequencySurahLabel.style.display = 'none';
            }
        }

        // Attach event listeners to the inputs to call the toggle function when values change
        errorsInput.addEventListener('input', toggleSurahFields);
        frequencyInput.addEventListener('input', toggleSurahFields);

        // Initialize visibility on page load
        toggleSurahFields();
        function toggleSelection() {
            const selectionSection = document.getElementById("selection-section");
            const toggleButton = document.getElementById("toggle-selection");
            if (selectionSection.classList.contains("hidden")) {
                selectionSection.classList.remove("hidden");
                toggleButton.textContent = "ğŸ”½ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ§Ù„Ø³ÙˆØ±";
            } else {
                selectionSection.classList.add("hidden");
                toggleButton.textContent = "ğŸ“– Ø§Ø®ØªØ± Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ§Ù„Ø³ÙˆØ±";
            }
        }

        // Group Surahs by Juz
        const groupedSurahs = surahs.reduce((acc, surah) => {
            if (!acc[surah.juz]) acc[surah.juz] = [];
            acc[surah.juz].push(surah.name);
            return acc;
        }, {});

        const partsContainer = document.getElementById("parts-container");

        // Generate Juz dynamically from Juz 1 to Juz 30
        for (let i = 1; i <= 30; i++) {
            const juz = `Ø¬Ø²Ø¡ ${i}`;
            if (groupedSurahs[juz]) {
                const partDiv = document.createElement("div");
                partDiv.className = "part";

                // Juz Header
                const partHeader = document.createElement("div");
                partHeader.className = "part-header";
                partHeader.innerHTML = `
                <input type="checkbox" id="juz-${i}" ${i === 27 || i === 28 ? "checked" : ""} onchange="toggleJuzSelection(${i}, '${juz}', this.checked)" />
                <label for="juz-${i}">${juz}</label>
                <button class="expand-btn" onclick="toggleDropdown(${i})">â¬‡ï¸</button>
            `;

                // Dropdown Container
                const surasDiv = document.createElement("div");
                surasDiv.className = "suras-dropdown";
                surasDiv.id = `suras-${i}`;
                surasDiv.style.display = "none";

                // Add Surah Checkboxes
                groupedSurahs[juz].forEach((sura, suraIndex) => {
                    // Skip Surahs with invalid names or empty values
                    if (!sura || sura.trim() === "") return;

                    const suraRow = document.createElement("div");
                    suraRow.className = "sura-row";

                    const suraCheckbox = document.createElement("input");
                    suraCheckbox.type = "checkbox";
                    suraCheckbox.id = `sura-${i}-${suraIndex}`;
                    suraCheckbox.value = sura;  // Ensure the sura name is properly set
                    suraCheckbox.checked = i === 27 || i === 28; // Check by default for Juz 1 and Juz 2
                    suraCheckbox.onclick = () => toggleSurahDetails(sura, suraCheckbox.checked, i); // Pass Juz number

                    const suraLabel = document.createElement("label");
                    suraLabel.htmlFor = `sura-${i}-${suraIndex}`;
                    suraLabel.textContent = sura;

                    suraRow.appendChild(suraCheckbox);
                    suraRow.appendChild(suraLabel);
                    surasDiv.appendChild(suraRow);
                });


                partDiv.appendChild(partHeader);
                partDiv.appendChild(surasDiv);
                partsContainer.appendChild(partDiv);
            }
        }

        // Toggle dropdown visibility
        function toggleDropdown(i) {
            const dropdown = document.getElementById(`suras-${i}`);
            dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
        }




        // Select or Deselect all Surahs in a Juz
        function toggleJuzSelection(i, juz, select) {
            const surasDiv = document.getElementById(`suras-${i}`);
            const checkboxes = surasDiv.querySelectorAll("input[type=checkbox]");

            checkboxes.forEach((checkbox) => {
                checkbox.checked = select;
                toggleSurahDetails(checkbox.value, checkbox.checked); // Call to show/hide Surah details
            });

            // If Juz is deselected, hide all Surah details in that Juz
            if (!select) {
                groupedSurahs[juz].forEach(sura => {
                    toggleSurahDetails(sura, false); // Remove details for each Surah in this Juz
                });
                surasDiv.style.display = "none"; // Hide the dropdown for this Juz
            } else {
                surasDiv.style.display = "block"; // Show the dropdown for this Juz
            }
        }


        function changeValue(surahName, type, action) {
            const inputField = document.querySelector(`.${type}[data-surah='${surahName}']`); // Select the correct input based on the type ('errors' or 'frequencies')
            let currentValue = parseInt(inputField.value);
            if (action === 'increment') {
                currentValue += 1;
            } else if (action === 'decrement' && currentValue > 0) {
                currentValue -= 1;
            }
            inputField.value = currentValue;
        }

        // Function to toggle Surah details
        function toggleSurahDetails(surahName, showDetails, juz = "ØºÙŠØ± Ù…Ø­Ø¯Ø¯") {
            if (!surahName || surahName === "on") return;
            const selectedDetailsDiv = document.getElementById("selected-details");
            const existingDetail = document.getElementById(`detail-${surahName}`);

            if (showDetails) {
                if (!existingDetail) {
                    const detailDiv = document.createElement("div");
                    detailDiv.id = `detail-${surahName}`;
                    detailDiv.dataset.juz = juz;
                    detailDiv.innerHTML = `
                <h4>${surahName}:</h4>
                <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡:</label>
                <button type="button" class="small-button" onclick="changeValue('${surahName}', 'errors', 'decrement')">-</button>
                <input type="number" class="errors small-input" data-surah="${surahName}" value="0" min="0">
                <button type="button" class="small-button" onclick="changeValue('${surahName}', 'errors', 'increment')">+</button>
                <br>
                <label>Ø¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª:</label>
                <button type="button" class="small-button" onclick="changeValue('${surahName}', 'frequencies', 'decrement')">-</button>
                <input type="number" class="frequencies small-input" data-surah="${surahName}" value="0">
                <button type="button" class="small-button" onclick="changeValue('${surahName}', 'frequencies', 'increment')">+</button>
            `;
                    selectedDetailsDiv.appendChild(detailDiv);
                }
            } else {
                if (existingDetail) {
                    existingDetail.remove();
                }
            }
        }

        // Call displaySurahDetails for default checked Surahs on page load
        window.onload = function () {
            document.querySelectorAll("input[type=checkbox]:checked").forEach((checkbox) => {
                toggleSurahDetails(checkbox.value, true);
            });
        }
        async function generateReport() {
            const dayName = new Date().toLocaleDateString('ar-EG', { weekday: 'long' });

            let output = `ğŸŒ¸ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ… ${dayName} ğŸŒ¸\n\n`;

            // Track processed surahs to avoid duplication
            const processedSurahs = new Set();

            // Initialize an object to store cumulative totals for mistakes and frequencies per Juz


            // Include ÙˆØ±Ø¯ Ø§Ù„Ø­ÙØ¸ section if checked
            if (document.getElementById('include-hifz').checked) {
                output += `â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„Ø­ÙØ¸:\n`;
                output += `\tØ§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©: ${document.getElementById('hifz-surah').value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}\n`;
                output += `\tÙ…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${document.getElementById('hifz-duration').value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©"}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: ${document.getElementById('hifz-repetition').value || "0"}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${document.getElementById('hifz-errors').value || "0"}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${document.getElementById('hifz-frequency').value || "0"}\n\n`;
            }

            // Include ÙˆØ±Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ section if checked
            if (document.getElementById('include-cumulative').checked) {
                output += `â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ:\n`;
                output += `\tÙ…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${document.getElementById('cumulative-duration').value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©"}\n`;
                output += `\tØ§Ù„ØªÙƒØ±Ø§Ø±: ${document.getElementById('cumulative-repetition').value || "0"}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${document.getElementById('cumulative-errors').value || "0"}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${document.getElementById('cumulative-frequency').value || "0"}\n\n`;
            }

            output += `â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØºÙŠØ¨ÙŠ:\n`;
            output += `\tÙ…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${document.getElementById('ghaybi-duration').value}\n`;
            output += `\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${document.getElementById('ghaybi-errors').value}\n`;

            // Check if the "Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©" for Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ should be included
            if (document.getElementById('ghaybi-errors').value > 0) {
                output += `\tØ§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡: ${document.getElementById('ghaybi-errors-surah').value}\n`;
            }

            output += `\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${document.getElementById('ghaybi-frequency').value}\n`;

            // Check if the "Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©" for Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª should be included
            if (document.getElementById('ghaybi-frequency').value > 0) {
                output += `\tØ§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ù„Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${document.getElementById('ghaybi-frequency-surah').value}\n`;
            }

            output += `\n`;

            // Include ÙˆØ±Ø¯ Ø§Ù„ØªØ³Ù…ÙŠØ¹ section
            output += `â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ³Ù…ÙŠØ¹:\n`;
            output += `\tÙ…Ø¯Ø© Ø§Ù„ØªØ³Ù…ÙŠØ¹: ${document.getElementById('tasmi3-duration').value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©"}\n`;
            output += `\tØªÙ… Ø§Ù„Ø³Ù…Ø§Ø¹ Ù„Ù€: ${document.getElementById('tasmi3-person').value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}\n`;
            const cumulativeTotals = {};

            // Loop through each Juz and include details for all surahs
            Object.keys(groupedSurahs).forEach((juz) => {
                const surahsInJuz = groupedSurahs[juz];
                let totalMistakes = 0;
                let totalFrequencies = 0;

                surahsInJuz.forEach((surahName) => {
                    // Check if the surah has already been processed
                    if (!processedSurahs.has(surahName)) {
                        const detailDiv = document.getElementById(`detail-${surahName}`);
                        if (detailDiv) {
                            const mistakes = parseInt(detailDiv.querySelector('.errors').value) || 0;
                            const frequencies = parseInt(detailDiv.querySelector('.frequencies').value) || 0;

                            // Add Surah details to the report
                            output += `\tğŸ’š ${surahName} :\n`;
                            output += `\t\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${mistakes}\n`;
                            output += `\t\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${frequencies}\n\n`;

                            // Update cumulative totals for this Juz
                            totalMistakes += mistakes;
                            totalFrequencies += frequencies;

                            // Mark this surah as processed
                            processedSurahs.add(surahName);
                        }
                    }
                });

                // Store the cumulative totals for each Juz
                if (totalMistakes > 0 || totalFrequencies > 0) {
                    cumulativeTotals[juz] = {
                        mistakes: totalMistakes,
                        frequencies: totalFrequencies,
                    };
                }
            });
            // Include cumulative totals per Juz
            output += `\nğŸ“ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ù„ØªØ±Ø¯Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø²Ø¡:\n`;

            Object.keys(cumulativeTotals).forEach((juz) => {
                const totals = cumulativeTotals[juz];

                // Always show statistics, even if they are zero
                output += `\n${juz}:\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${totals.mistakes || 0}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${totals.frequencies || 0}\n`;
            });

            // If no data exists in cumulativeTotals, still show "0" for every Juz
            if (Object.keys(cumulativeTotals).length === 0) {
                output += `\t Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¬Ø²Ø§Ø¡ Ù…Ø³Ø¬Ù„Ø© Ø¨Ø£Ø®Ø·Ø§Ø¡ Ø£Ùˆ ØªØ±Ø¯Ø¯Ø§Øª ÙÙŠ Ø§Ù„ØªØ³Ù…ÙŠØ¹ ğŸ¥°`;
            }
            output += `\n`;
            // Include Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰ section
            output += `\nğŸ’ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰:\n`;
            output += `\tÙˆØ±Ø¯ Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©: ${document.querySelector('input[name="monthly-completion"]:checked')?.value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}\n`;
            output += `\tØ§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù‚Ø¨Ù„ÙŠ: ${document.querySelector('input[name="preparation"]:checked')?.value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}\n`;
            output += `\tÙˆØ±Ø¯ Ø§Ù„ØªÙØ³ÙŠØ±: ${document.querySelector('input[name="tafseer"]:checked')?.value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}\n`;
            output += `\tÙˆØ±Ø¯ Ø§Ù„Ø£Ø°ÙƒØ§Ø±: ${document.querySelector('input[name="athkar"]:checked')?.value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}\n`;
            output += `\tÙˆØ±Ø¯ Ø§Ù„Ù…Ø­Ø±Ø§Ø¨: ${document.querySelector('input[name="mihrab"]:checked')?.value || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}\n`;
            output += `\n`;
            output += `\tØ§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ ÙŠØ³Ø± ÙˆØ§Ø¹Ø§Ù† ğŸ¥°\n`;

            // Display the report in the textarea
            const copyField = document.getElementById('copy-field');
            copyField.value = output;
            document.getElementById('output').classList.remove('hidden');
        }


        // Handle button click
        async function handleButtonClick() {
            await generateReport(); // Wait for report generation to complete
            copyToClipboard(); // Copy to clipboard after completion
        }
        console.log(`Surah: ${surahName}, Errors: ${errors}, Frequencies: ${frequencies}`);


    </script>
    <footer>
        <footer>
            <p>Â© 2025 Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø¨Ø© <strong>Ø¢ÙŠØ© Ø§Ù„Ø±Ø§ÙŠØ³ </strong>ØºÙØ± Ø§Ù„Ù„Ù‡ Ù„Ù‡Ø§.</p>
        </footer>
    </footer>
</body>

</html>