<!DOCTYPE html>
<html lang="ar">
<!-- Header Section -->
<header
    style="display: flex; align-items: center; justify-content: space-between; padding: 10px 20px; background: linear-gradient(45deg, #faa0dc, #d291bc); border-bottom: 1px solid #ddd;">
    <!-- Logo -->
    <div>
        <img src="img/ataa.png" alt="Logo" style="height: 50px; max-width: 100px;">
    </div>
    <!-- Title -->
    <h1 style="flex: 1; text-align: center; font-size: 24px; margin: 0;">ูููุฏ ุชูุฑูุฑ ูููู ูุจุฑูุงูุฌ ุนุทุงุก (ูููุน ุบูุฑ ุฑุณูู)
    </h1>
    <!-- Empty Placeholder (optional, for spacing or future use) -->
    <div style="width: 100px;"></div>
</header>

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/gif" href="ataa.png">
    </a>

    <title>ูููุฏ ุชูุฑูุฑ ูููู ูู ุจุฑูุงูุฌ ุนุทุงุก</title>
    <link href="style.css" rel="stylesheet" />
    <style>
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                text-align: center;
                padding: 15px 10px;
            }

            header h1 {
                font-size: 20px;
                margin-top: 10px;
            }

            header img {
                height: 40px;
            }

            header div {
                width: 80px;
            }
        }

        /* Small Thumbnail Image */
        .thumbnail {
            width: 200px;
            /* Small image */
            height: auto;
            cursor: pointer;
            border-radius: 8px;
            /* Rounded corners */
            transition: transform 0.3s ease-in-out;
        }

        /* Hover effect */
        .thumbnail:hover {
            transform: scale(1.1);
            /* Slight zoom effect */
        }

        /* The Modal (Background) */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            /* Dark background */
            text-align: center;
        }

        /* Large Image in Modal */
        .modal-content {
            margin-top: 5%;
            width: 80%;
            max-width: 600px;
            /* Large size */
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(255, 255, 255, 0.5);
        }

        /* Close Button */
        .close {
            position: absolute;
            top: 15px;
            right: 25px;
            color: #fff;
            font-size: 40px;
            cursor: pointer;
        }

        .close:hover {
            color: #ccc;
        }

        /* Responsive Design */
        @media screen and (max-width: 768px) {
            .modal-content {
                width: 80%;
            }
        }
    </style>
</head>


<body>


    <div class="section">
        <h2> ุฌุฏูู ุงูุงุณุจูุน </h2>
        <!-- Small Thumbnail Image -->
        <img src="img/tab.jpg" alt=" ุงูุฌุฏูู ุงูุตุบูุฑ" class="thumbnail" onclick="openModal()">

        <!-- The Modal (Hidden by Default) -->
        <div id="imageModal" class="modal">
            <span class="close" onclick="closeModal()">&times;</span>
            <img class="modal-content" id="modalImage" src="img/tab.jpg" alt="ุงูุฌุฏูู ูุจุฑ ูู ุงูุนูุฑ">
        </div>
    </div>
    <div class="section-toggle">
        <button id="toggle-selection" onclick="toggleSelection()">๐ ุงุถุบุท ููุง ูุงุฎุชูุงุฑ ุงูุฃุญุฒุงุจ ูุงูุณูุฑ ูุชุณููุน</button>
    </div>

    <div id="selection-section" class="hidden">
        <div class="section">
            <h2>๐ ุงุฎุชุฑ ุงูุฃุญุฒุงุจ ูุงูุณูุฑ ุงููุฑุงุฏ ุชุณููุนูุง</h2>
            <div id="parts-container" class="parts-container">
                <!-- Juz and Surah dropdowns will be dynamically populated here -->
            </div>
        </div>
    </div>



    <div class="section">
        <label>
            ุชุถููู โ๏ธ ูุฑุฏ ุงูุญูุธ:
            <input type="checkbox" id="include-hifz" checked>
        </label>
    </div>
    <div class="section">
        <label>
            ุชุถููู โ๏ธ ูุฑุฏ ุงูุชุฑุงููู:
            <input type="checkbox" id="include-cumulative" checked>
        </label>
    </div>
    <div class="section" id="hifz-section">
        <h2>โ๏ธ ูุฑุฏ ุงูุญูุธ</h2><label>ุงุณู ุงูุณูุฑุฉ: <input type="text" id="hifz-surah"
                placeholder="ุงูุชุจ ุงุณู ุงูุณูุฑุฉ"></label><label>ูุฏุฉ ุงูุชุณุฌูู: <input type="text" id="hifz-duration"
                placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label><label>ุนุฏุฏ ุงูุชูุฑุงุฑ: <input type="number" id="hifz-repetition"
                value="10"></label><label>ุนุฏุฏ ุงูุฃุฎุทุงุก: <input type="number" id="hifz-errors"
                value="0"></label><label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช: <input type="number" id="hifz-frequency" value="0"></label>
    </div>
    <div class="section" id="cumulative-section">
        <h2>โ๏ธ ูุฑุฏ ุงูุชุฑุงููู</h2>
        <label>ุตูุญุงุช ุงูุชุฑุงููู: <input type="text" id="cumulative-pages" placeholder="ุฃูุฌู ุงูุชุฑุงููู"></label>
        <label>ูุฏุฉ ุงูุชุณุฌูู: <input type="text" id="cumulative-duration"
                placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label><label>ุงูุชูุฑุงุฑ: <input type="number" id="cumulative-repetition"
                value="10"></label><label>ุนุฏุฏ ุงูุฃุฎุทุงุก: <input type="number" id="cumulative-errors"
                value="0"></label><label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช: <input type="number" id="cumulative-frequency" value="0"></label>
    </div>
    <div class="section" id="ghaybi-section">
        <h2>โ๏ธ ูุฑุฏ ุงูุบูุจู</h2>
        <!-- Create a select dropdown for Juz values -->
        <label>ุงูุฃุญุฒุงุจ: <input type="text" id="ghaybi-name" placeholder=" ุงุญุฒุงุจ ุงูุบูุจู"></label>

        <br>
        <label>ูุฏุฉ ุงูุชุณุฌูู: <input type="text" id="ghaybi-duration" placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label>

        <!-- Number of mistakes with increment and decrement buttons -->
        <label>ุนุฏุฏ ุงูุฃุฎุทุงุก:</label>
        <button type="button" class="small-button"
            onclick="changeValue('ghaybi-errors', 'errors', 'decrement')">-</button>
        <input type="number" class="errors small-input" id="ghaybi-errors" value="0" data-surah="ghaybi-errors" min="0">
        <button type="button" class="small-button"
            onclick="changeValue('ghaybi-errors', 'errors', 'increment')">+</button>

        <br>
        <label id="errors-surah-label" style="display: none;">ุงุณู ุงูุณูุฑุฉ : <input type="text"
                id="ghaybi-errors-surah"></label>

        <!-- Number of frequencies with increment and decrement buttons -->
        <label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช:</label>
        <button type="button" class="small-button"
            onclick="changeValue('ghaybi-frequency', 'frequencies', 'decrement')">-</button>
        <input type="number" class="frequencies small-input" id="ghaybi-frequency" value="0"
            data-surah="ghaybi-frequency">
        <button type="button" class="small-button"
            onclick="changeValue('ghaybi-frequency', 'frequencies', 'increment')">+</button>
        <br>
        <label id="frequency-surah-label" style="display: none;">ุงุณู ุงูุณูุฑุฉ : <input type="text"
                id="ghaybi-frequency-surah"></label>
    </div>

    <div class="section">
        <h2>โ๏ธ ูุฑุฏ ุงูุชุณููุน</h2><label>ูุฏุฉ ุงูุชุณููุน: <input type="text" id="tasmi3-duration"
                placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label><label>ุชู ุงูุชุณููุน : <input type="text" id="tasmi3-person"
                value="ูุงูุณูุงุน ุนูู ุฃุฎุชู ุงููุฑุงููุฉ"></label>
        <h3>ุงูุณูุฑ</h3>
        <div id="selected-details">
            <!-- Selected Surah/Juz details will appear here -->
        </div>
    </div>


    <div class="section">
        <h2>๐ ุงูููุงู ุงูุฃุฎุฑู</h2><label>ูุฑุฏ ุงูุฎุชูุฉ ุงูุดูุฑูุฉ: <input type="radio" name="monthly-completion" value="ุชู"
                checked>ุชู <input type="radio" name="monthly-completion" value="ูู ูุชู">ูู ูุชู
        </label><label>ุงูุชุญุถูุฑ
            ุงููุจูู: <input type="radio" name="preparation" value="ุชู" checked>ุชู <input type="radio" name="preparation"
                value="ูู ูุชู">ูู ูุชู </label><label>ูุฑุฏ ุงูุชูุณูุฑ: <input type="radio" name="tafseer" value="ุชู"
                checked>ุชู <input type="radio" name="tafseer" value="ูู ูุชู">ูู ูุชู
        </label>
        <label>ุงููุชุดุงุจูุงุช: <input type="radio" name="motchebeh" value="ุชู" checked>ุชู <input type="radio"
                name="motchebeh" value="ูู ูุชู">ูู ูุชู </label><label>ูุฑุฏ ุงูุฃุฐูุงุฑ: <input type="radio" name="athkar"
                value="ุชู" checked>ุชู <input type="radio" name="athkar" value="ูู ูุชู">ูู ูุชู
        </label><label>ูุฑุฏ ุงููุญุฑุงุจ: <input type="radio" name="mihrab" value="ุชู" checked>ุชู <input type="radio"
                name="mihrab" value="ูู ูุชู">ูู ูุชู </label>


    </div><button onclick="handleButtonClick()">ุฅูุดุงุก ุงูุชูุฑูุฑ ููุณุฎู</button>
    <div id="output" class="output hidden"><textarea id="copy-field" readonly></textarea></div>

    <script>
        // Function to toggle visibility based on the checkbox state
        document.getElementById("include-hifz").addEventListener("change", function () {
            var hifzChecked = this.checked;

            // Hide or show the Motchebeh and Tafsir radio buttons based on the checkbox state
            document.querySelector('input[name="motchebeh"]').parentElement.style.display = hifzChecked ? "block" : "none";
            document.querySelector('input[name="tafseer"]').parentElement.style.display = hifzChecked ? "block" : "none";
        });

        // Initialize on page load based on the checkbox's default state
        window.addEventListener('DOMContentLoaded', (event) => {
            var hifzChecked = document.getElementById("include-hifz").checked;

            document.querySelector('input[name="motchebeh"]').parentElement.style.display = hifzChecked ? "block" : "none";
            document.querySelector('input[name="tafseer"]').parentElement.style.display = hifzChecked ? "block" : "none";
        });
        // List of Surahs
        const surahs = [
            { name: "ุณูุฑุฉ ู", juz: "ุญุฒุจ 52" },
            { name: "ุณูุฑุฉ ุงูุฐุงุฑูุงุช", juz: "ุญุฒุจ 53" },
            { name: "ุณูุฑุฉ ุงูุทูุฑ", juz: "ุญุฒุจ 53" },
            { name: "ุณูุฑุฉ ุงููุฌู", juz: "ุญุฒุจ 53" },
            { name: "ุณูุฑุฉ ุงูููุฑ", juz: "ุญุฒุจ 53" },
            { name: "ุณูุฑุฉ ุงูุฑุญูุงู", juz: "ุญุฒุจ 54" },
            { name: "ุณูุฑุฉ ุงููุงูุนุฉ", juz: "ุญุฒุจ 54" },
            { name: "ุณูุฑุฉ ุงูุญุฏูุฏ", juz: "ุญุฒุจ 54" },
            { name: "ุณูุฑุฉ ุงููุฌุงุฏูุฉ", juz: "ุญุฒุจ 55" },
            { name: "ุณูุฑุฉ ุงูุญุดุฑ", juz: "ุญุฒุจ 55" },
            { name: "ุณูุฑุฉ ุงูููุชุญูุฉ", juz: "ุญุฒุจ 55" },
            { name: "ุณูุฑุฉ ุงูุตู", juz: "ุญุฒุจ 55" },
            { name: "ุณูุฑุฉ ุงูุฌูุนุฉ", juz: "ุญุฒุจ 56" },
            { name: "ุณูุฑุฉ ุงูููุงูููู", juz: "ุญุฒุจ 56" },
            { name: "ุณูุฑุฉ ุงูุชุบุงุจู", juz: "ุญุฒุจ 56" },
            { name: "ุณูุฑุฉ ุงูุทูุงู", juz: "ุญุฒุจ 56" },
            { name: "ุณูุฑุฉ ุงูุชุญุฑูู", juz: "ุญุฒุจ 56" },
            { name: "ุณูุฑุฉ ุงูููู", juz: "ุญุฒุจ 57" },
            { name: "ุณูุฑุฉ ุงูููู", juz: "ุญุฒุจ 57" },
            { name: "ุณูุฑุฉ ุงูุญุงูุฉ", juz: "ุญุฒุจ 57" },
            { name: "ุณูุฑุฉ ุงููุนุงุฑุฌ", juz: "ุญุฒุจ 57" },
            { name: "ุณูุฑุฉ ููุญ", juz: "ุญุฒุจ 57" },
            { name: "ุณูุฑุฉ ุงูุฌู", juz: "ุญุฒุจ 58" },
            { name: "ุณูุฑุฉ ุงููุฒูู", juz: "ุญุฒุจ 58" },
            { name: "ุณูุฑุฉ ุงููุฏุซุฑ", juz: "ุญุฒุจ 58" },
            { name: "ุณูุฑุฉ ุงูููุงูุฉ", juz: "ุญุฒุจ 58" },
            { name: "ุณูุฑุฉ ุงูุฅูุณุงู", juz: "ุญุฒุจ 58" },
            { name: "ุณูุฑุฉ ุงููุฑุณูุงุช", juz: "ุญุฒุจ 58" },
            { name: "ุณูุฑุฉ ุงููุจุฃ", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุงููุงุฒุนุงุช", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุนุจุณ", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุงูุชูููุฑ", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุงูุฅููุทุงุฑ", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุงููุทูููู", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุงูุงูุดูุงู", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุงูุจุฑูุฌ", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุงูุทุงุฑู", juz: "ุญุฒุจ 59" },
            { name: "ุณูุฑุฉ ุงูุฃุนูู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุบุงุดูุฉ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงููุฌุฑ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุจูุฏ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุดูุณ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูููู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุถุญู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุดุฑุญ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุชูู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุนูู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงููุฏุฑ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุจููุฉ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุฒูุฒูุฉ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุนุงุฏูุงุช", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงููุงุฑุนุฉ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุชูุงุซุฑ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุนุตุฑ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูููุฒุฉ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูููู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ูุฑูุด", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงููุงุนูู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูููุซุฑ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงููุงูุฑูู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงููุตุฑ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงููุณุฏ", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูุฅุฎูุงุต", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงูููู", juz: "ุญุฒุจ 60" },
            { name: "ุณูุฑุฉ ุงููุงุณ", juz: "ุญุฒุจ 60" }
        ];

        // Function to extract unique 'juz' values and populate the select dropdown with the first Surah of each Juz
        function populateJuzDropdown() {
            // const juzSelect = document.getElementById("juz-select");

            // Extract unique 'juz' values
            const uniqueJuz = [...new Set(surahs.map(item => item.juz))];

            // Populate the dropdown with unique juz values and the name of the first Surah in each Juz
            uniqueJuz.forEach(juz => {
                const firstSurah = surahs.find(surah => surah.juz === juz); // Find the first Surah for the Juz
                const option = document.createElement("option");
                option.value = `${juz}: ุญุฒุจ ${firstSurah.name}`;
                option.textContent = `${juz}: ุญุฒุจ ${firstSurah.name}`;
                // juzSelect.appendChild(option);
            });
        }
        populateJuzDropdown();


        document.addEventListener('DOMContentLoaded', function () {
            const hifzCheckbox = document.getElementById('include-hifz');
            const cumulativeCheckbox = document.getElementById('include-cumulative');
            const hifzSection = document.getElementById('hifz-section');
            const cumulativeSection = document.getElementById('cumulative-section');

            // Function to toggle visibility of sections
            function toggleSections() {
                hifzSection.style.display = hifzCheckbox.checked ? 'block' : 'none';
                cumulativeSection.style.display = cumulativeCheckbox.checked ? 'block' : 'none';
            }

            // Call the function to set the initial visibility
            toggleSections();

            // Add event listeners to the checkboxes
            hifzCheckbox.addEventListener('change', toggleSections);
            cumulativeCheckbox.addEventListener('change', toggleSections);
        });

        //toglle filed 

        document.addEventListener('DOMContentLoaded', function () {
            const errorsInput = document.getElementById('ghaybi-errors');
            const frequencyInput = document.getElementById('ghaybi-frequency');
            const errorsSurahLabel = document.getElementById('errors-surah-label');
            const frequencySurahLabel = document.getElementById('frequency-surah-label');

            // Function to toggle the visibility of the "ุงุณู ุงูุณูุฑุฉ" fields
            function toggleSurahFields() {
                // Show or hide "ุงุณู ุงูุณูุฑุฉ" for errors
                if (parseInt(errorsInput.value) > 0) {
                    errorsSurahLabel.style.display = 'block';
                } else {
                    errorsSurahLabel.style.display = 'none';
                }

                // Show or hide "ุงุณู ุงูุณูุฑุฉ" for frequencies
                if (parseInt(frequencyInput.value) > 0) {
                    frequencySurahLabel.style.display = 'block';
                } else {
                    frequencySurahLabel.style.display = 'none';
                }
            }

            // Call toggleSurahFields initially to set the correct visibility on page load
            toggleSurahFields();

            // Function to handle the increment and decrement buttons
            window.changeValue = function (inputId, type, action) {
                const inputElement = document.getElementById(inputId);
                let currentValue = parseInt(inputElement.value);

                if (action === 'increment') {
                    currentValue++;
                } else if (action === 'decrement' && currentValue > 0) {
                    currentValue--;
                }

                inputElement.value = currentValue;

                // Call the toggle function after updating the value
                toggleSurahFields();
            };
        });

        // Initialize visibility on page load

        function toggleSelection() {
            const selectionSection = document.getElementById("selection-section");
            const toggleButton = document.getElementById("toggle-selection");
            if (selectionSection.classList.contains("hidden")) {
                selectionSection.classList.remove("hidden");
                toggleButton.textContent = "๐ฝ ุฅุฎูุงุก ุงูุฃุฌุฒุงุก ูุงูุณูุฑ";
            } else {
                selectionSection.classList.add("hidden");
                toggleButton.textContent = "๐ ุงุฎุชุฑ ุงูุฃุฌุฒุงุก ูุงูุณูุฑ";
            }
        }

        // Group Surahs by Juz
        const groupedSurahs = surahs.reduce((acc, surah) => {
            if (!acc[surah.juz]) acc[surah.juz] = [];
            acc[surah.juz].push(surah.name);
            return acc;
        }, {});

        const partsContainer = document.getElementById("parts-container");

        // Generate Juz dynamically from Juz 1 to Juz 30
        for (let i = 1; i <= 60; i++) {
            const juz = `ุญุฒุจ ${i}`;

            if (groupedSurahs[juz]) {
                const partDiv = document.createElement("div");
                partDiv.className = "part";
                const firstSurah = surahs.find(surah => surah.juz === juz);
                // Juz Header
                const partHeader = document.createElement("div");
                partHeader.className = "part-header";
                partHeader.innerHTML = `
                <input type="checkbox" id="juz-${i}" ${i === 58 ? "checked" : ""} onchange="toggleJuzSelection(${i}, '${juz}', this.checked)" />
                <label for="juz-${i}">${juz} : ุญุฒุจ ${firstSurah.name}</label>
                <button class="expand-btn" onclick="toggleDropdown(${i})">โฌ๏ธ</button>
            `;

                // Dropdown Container
                const surasDiv = document.createElement("div");
                surasDiv.className = "suras-dropdown";
                surasDiv.id = `suras-${i}`;
                surasDiv.style.display = "none";

                // Add Surah Checkboxes
                groupedSurahs[juz].forEach((sura, suraIndex) => {
                    // Skip Surahs with invalid names or empty values
                    if (!sura || sura.trim() === "") return;

                    const suraRow = document.createElement("div");
                    suraRow.className = "sura-row";

                    const suraCheckbox = document.createElement("input");
                    suraCheckbox.type = "checkbox";
                    suraCheckbox.id = `sura-${i}-${suraIndex}`;
                    suraCheckbox.value = sura;  // Ensure the sura name is properly set
                    suraCheckbox.checked = i === 58; // Check by default for Juz 1 and Juz 2
                    suraCheckbox.onclick = () => toggleSurahDetails(sura, suraCheckbox.checked, i); // Pass Juz number

                    const suraLabel = document.createElement("label");
                    suraLabel.htmlFor = `sura-${i}-${suraIndex}`;
                    suraLabel.textContent = sura;

                    suraRow.appendChild(suraCheckbox);
                    suraRow.appendChild(suraLabel);
                    surasDiv.appendChild(suraRow);
                });


                partDiv.appendChild(partHeader);
                partDiv.appendChild(surasDiv);
                partsContainer.appendChild(partDiv);
            }
        }

        // Toggle dropdown visibility
        function toggleDropdown(i) {
            const dropdown = document.getElementById(`suras-${i}`);
            dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
        }




        // Select or Deselect all Surahs in a Juz
        function toggleJuzSelection(i, juz, select) {
            const surasDiv = document.getElementById(`suras-${i}`);
            const checkboxes = surasDiv.querySelectorAll("input[type=checkbox]");

            checkboxes.forEach((checkbox) => {
                checkbox.checked = select;
                toggleSurahDetails(checkbox.value, checkbox.checked); // Call to show/hide Surah details
            });

            // If Juz is deselected, hide all Surah details in that Juz
            if (!select) {
                groupedSurahs[juz].forEach(sura => {
                    toggleSurahDetails(sura, false); // Remove details for each Surah in this Juz
                });
                surasDiv.style.display = "none"; // Hide the dropdown for this Juz
            } else {
                surasDiv.style.display = "block"; // Show the dropdown for this Juz
            }
        }
        /*function changeValue(id, type, action) {
            const element = document.getElementById(id);
            const value = parseInt(element.value);
            const newValue = action === 'increment' ? value + 1 : value - 1;
            element.value = Math.max(newValue, 0);
        }*/function changeValue(id, type, action) {
            // Get the element by the passed ID (for Tasmi3 or Ghaybi)
            const element = document.getElementById(id);

            // If the element doesn't exist, exit the function
            if (!element) return;

            // Get the current value of the input field
            const value = parseInt(element.value);

            // Increment or decrement the value
            const newValue = action === 'increment' ? value + 1 : value - 1;

            // Ensure the value doesn't go below zero
            element.value = Math.max(newValue, 0);
        }

        // Function to toggle Surah details
        function toggleSurahDetails(surahName, showDetails, juz = "ุบูุฑ ูุญุฏุฏ") {
            if (!surahName || surahName === "on") return;
            const selectedDetailsDiv = document.getElementById("selected-details");
            const existingDetail = document.getElementById(`detail-${surahName}`);

            if (showDetails) {
                if (!existingDetail) {
                    const detailDiv = document.createElement("div");
                    detailDiv.id = `detail-${surahName}`;
                    detailDiv.dataset.juz = juz;
                    detailDiv.innerHTML = `
                 <h4>${surahName}:</h4>
                <label>ุนุฏุฏ ุงูุฃุฎุทุงุก:</label>
                <button type="button" class="small-button" onclick="changeValue('errors-${surahName}', 'errors', 'decrement')">-</button>
                <input type="number" class="errors small-input" id="errors-${surahName}" data-surah="${surahName}" value="0" min="0">
                <button type="button" class="small-button" onclick="changeValue('errors-${surahName}', 'errors', 'increment')">+</button>
                <br>
                <label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช:</label>
                <button type="button" class="small-button" onclick="changeValue('frequencies-${surahName}', 'frequencies', 'decrement')">-</button>
                <input type="number" class="frequencies small-input" id="frequencies-${surahName}" data-surah="${surahName}" value="0">
                <button type="button" class="small-button" onclick="changeValue('frequencies-${surahName}', 'frequencies', 'increment')">+</button>
            `;
                    selectedDetailsDiv.appendChild(detailDiv);
                }
            } else {
                if (existingDetail) {
                    existingDetail.remove();
                }
            }
        }

        // Call displaySurahDetails for default checked Surahs on page load
        window.onload = function () {
            document.querySelectorAll("input[type=checkbox]:checked").forEach((checkbox) => {
                toggleSurahDetails(checkbox.value, true);
            });
        }
        async function generateReport() {
            const dayName = new Date().toLocaleDateString('ar-EG', { weekday: 'long' });

            let output = `๐ธ ุชูุฑูุฑ ููู ${dayName} ๐ธ\n\n`;

            // Track processed surahs to avoid duplication
            const processedSurahs = new Set();

            // Initialize an object to store cumulative totals for mistakes and frequencies per Juz


            // Include ูุฑุฏ ุงูุญูุธ section if checked
            if (document.getElementById('include-hifz').checked) {
                output += `โ๏ธ ูุฑุฏ ุงูุญูุธ:\n`;
                output += `\tุงุณู ุงูุณูุฑุฉ: ${document.getElementById('hifz-surah').value || "ุบูุฑ ูุญุฏุฏ"}\n`;
                output += `\tูุฏุฉ ุงูุชุณุฌูู: ${document.getElementById('hifz-duration').value || "ุบูุฑ ูุญุฏุฏุฉ"}\n`;
                output += `\tุนุฏุฏ ุงูุชูุฑุงุฑ: ${document.getElementById('hifz-repetition').value || "0"}\n`;
                output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${document.getElementById('hifz-errors').value || "0"}\n`;
                output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${document.getElementById('hifz-frequency').value || "0"}\n\n`;
            }

            // Include ูุฑุฏ ุงูุชุฑุงููู section if checked
            if (document.getElementById('include-cumulative').checked) {
                output += `โ๏ธ ูุฑุฏ ุงูุชุฑุงููู:\n`;
                output += `\tุตูุญุงุช ุงูุชุฑุงููู : ${document.getElementById('cumulative-pages').value || "ุบูุฑ ูุญุฏุฏุฉ"}\n`;
                output += `\tูุฏุฉ ุงูุชุณุฌูู: ${document.getElementById('cumulative-duration').value || "ุบูุฑ ูุญุฏุฏุฉ"}\n`;
                output += `\tุงูุชูุฑุงุฑ: ${document.getElementById('cumulative-repetition').value || "0"}\n`;
                output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${document.getElementById('cumulative-errors').value || "0"}\n`;
                output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${document.getElementById('cumulative-frequency').value || "0"}\n\n`;
            }
            //const selectedOption = document.getElementById("juz-select").value;
            output += `โ๏ธ ูุฑุฏ ุงูุบูุจู:\n`;
            // output += `\t${selectedOption}\n`;
            output += `\tุงูุฃุญุฒุงุจ:  ${document.getElementById('ghaybi-name').value}\n`;
            output += `\tูุฏุฉ ุงูุชุณุฌูู: ${document.getElementById('ghaybi-duration').value}\n`;
            output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${document.getElementById('ghaybi-errors').value}\n`;

            // Check if the "ุงุณู ุงูุณูุฑุฉ" for ุงูุฃุฎุทุงุก should be included
            if (document.getElementById('ghaybi-errors').value > 0) {
                output += `\tุงุณู ุงูุณูุฑุงูุชู ูููุง ุฃุฎุทุงุก: ${document.getElementById('ghaybi-errors-surah').value}\n`;
            }

            output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${document.getElementById('ghaybi-frequency').value}\n`;

            // Check if the "ุงุณู ุงูุณูุฑุฉ" for ุงูุชุฑุฏุฏุงุช should be included
            if (document.getElementById('ghaybi-frequency').value > 0) {
                output += `\tุงุณู ุงูุณูุฑุฉ ููุชุฑุฏุฏุงุช: ${document.getElementById('ghaybi-frequency-surah').value}\n`;
            }

            output += `\n`;

            // Include ูุฑุฏ ุงูุชุณููุน section
            output += `โ๏ธ ูุฑุฏ ุงูุชุณููุน:\n`;
            output += `\tูุฏุฉ ุงูุชุณููุน: ${document.getElementById('tasmi3-duration').value || "ุบูุฑ ูุญุฏุฏุฉ"}\n`;
            output += `\tุชู ุงูุชุณููุน ${document.getElementById('tasmi3-person').value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            const cumulativeTotals = {};

            Object.keys(groupedSurahs).forEach((juz) => {
                const surahsInJuz = groupedSurahs[juz];
                let totalMistakes = 0;
                let totalFrequencies = 0;

                surahsInJuz.forEach((surahName) => {
                    // Check if the surah has already been processed
                    if (!processedSurahs.has(surahName)) {
                        const detailDiv = document.getElementById(`detail-${surahName}`);
                        if (detailDiv) {
                            const mistakes = parseInt(detailDiv.querySelector('.errors').value) || 0;
                            const frequencies = parseInt(detailDiv.querySelector('.frequencies').value) || 0;

                            // Add Surah details to the report
                            if (juz === "ุญุฒุจ 60" || juz === "ุญุฒุจ 59") {
                                // Include full details (mistakes & frequencies) for Juz 59 & 60
                                output += `\t๐ ${surahName} :\n`;
                                output += `\t\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${mistakes}\n`;
                                output += `\t\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${frequencies}\n\n`;
                            }
                            // Update cumulative totals for this Juz
                            totalMistakes += mistakes;
                            totalFrequencies += frequencies;
                            cumulativeTotals[juz] = {
                                mistakes: totalMistakes,
                                frequencies: totalFrequencies,
                            };
                            // Mark this surah as processed
                            processedSurahs.add(surahName);
                        }
                    }
                });

            });


            // Includ
            // e cumulative totals per Juz

            output += `\n๐ ุฅุฌูุงูู ุงูุฃุฎุทุงุก ูุงูุชุฑุฏุฏุงุช ุญุณุจ ุงูุฌุฒุก:\n`;

            Object.keys(cumulativeTotals).forEach((juz) => {
                const totals = cumulativeTotals[juz];
                const firstSurah = surahs.find(surah => surah.juz === juz);
                // Always show statistics, even if they are zero
                output += `\n ุญุฒุจ ${firstSurah.name}:\n`;
                output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${totals.mistakes || 0}\n`;
                output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${totals.frequencies || 0}\n`;
            });

            // If no data exists in cumulativeTotals, still show "0" for every Juz
            if (Object.keys(cumulativeTotals).length === 0) {
                output += `\t ูุง ุชูุฌุฏ ุฃุฌุฒุงุก ูุณุฌูุฉ ุจุฃุฎุทุงุก ุฃู ุชุฑุฏุฏุงุช ูู ุงูุชุณููุน ๐ฅฐ`;
            }
            output += `\n`;
            // Include ุงูููุงู ุงูุฃุฎุฑู section
            output += `\n๐ ุงูููุงู ุงูุฃุฎุฑู:\n`;
            output += `\tูุฑุฏ ุงูุฎุชูุฉ ุงูุดูุฑูุฉ: ${document.querySelector('input[name="monthly-completion"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            output += `\tุงูุชุญุถูุฑ ุงููุจูู: ${document.querySelector('input[name="preparation"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            // Check if Motchebeh is visible before including it in the output
            if (document.querySelector('input[name="motchebeh"]').parentElement.style.display !== "none") {
                output += `\tุงููุชุดุงุจูุงุช: ${document.querySelector('input[name="motchebeh"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            }
            if (document.querySelector('input[name="tafseer"]').parentElement.style.display !== "none") {
                output += `\tูุฑุฏ ุงูุชูุณูุฑ: ${document.querySelector('input[name="tafseer"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            }


            output += `\tูุฑุฏ ุงูุฃุฐูุงุฑ: ${document.querySelector('input[name="athkar"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            output += `\tูุฑุฏ ุงููุญุฑุงุจ: ${document.querySelector('input[name="mihrab"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            output += `\n`;
            output += `\tุงูุญูุฏ ููู ุงูุฐู ูุณุฑ ูุฃุนุงู ๐ฅฐ\n`;

            // Display the report in the textarea
            const copyField = document.getElementById('copy-field');
            copyField.value = output;
            document.getElementById('output').classList.remove('hidden');
        }

        function copyToClipboard() {
            const copyField = document.getElementById('copy-field');
            copyField.select();
            document.execCommand('copy');
            alert('ุชู ูุณุฎ ุงูุชูุฑูุฑ! ุฑุฒููู ุงููู ุงูุฎุชู ุงููุฑูุจ! ๐');
        }
        /*viisssssssssit to see if i should update it or not */




        // Handle button click
        async function handleButtonClick() {
            await generateReport(); // Wait for report generation to complete

            copyToClipboard(); // Copy to clipboard after completion
        }


        /*
                function toggleImage() {
                    var imageContainer = document.getElementById('image-container');
                    if (imageContainer.style.display === "none") {
                        imageContainer.style.display = "block"; // Show the image
                    } else {
                        imageContainer.style.display = "none"; // Hide the image
                    }
                }*/// Open the modal
        // Open the modal
        function openModal() {
            document.getElementById("imageModal").style.display = "block";
        }

        // Close the modal
        function closeModal() {
            document.getElementById("imageModal").style.display = "none";
        }

        // Close modal when clicking outside the image
        window.onclick = function (event) {
            var modal = document.getElementById("imageModal");
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }



    </script>

    <footer>
        <footer>
            <p>ยฉ 2025 ุจุฑูุฌุฉ ุงูุทูููุจุฉ <strong>ุขูุฉ ุงูุฑุงูุณ </strong>ุบูุฑ ุงููู ููุง.</p>
        </footer>
    </footer>
</body>

</html>