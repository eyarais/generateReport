<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ„Ø¯ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ </title>
    <link href="style.css" rel="stylesheet" />

</head>

<body>

    <h1>ğŸŒ¸ Ù…ÙˆÙ„Ø¯ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ ğŸŒ¸</h1>
    <div id="container" class="section">
        <h2> Ù…Ø¤Ù‚Øª Ù„ØªØ³Ù…ÙŠØ¹</h2>
        <div id="timer">00:00:00</div>
        <div>
            <button onclick="startTimer()">Ø¨Ø¯Ø£</button>
            <button onclick="pauseTimer()">Ø§ÙŠÙ‚Ø§Ù</button>
            <button onclick="resetTimer()">ØªØµÙÙŠØ±</button>
        </div>
    </div>


    <div class="section">
        <label>
            ØªØ¶Ù…ÙŠÙ† â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„Ø­ÙØ¸:
            <input type="checkbox" id="include-hifz" checked>
        </label>
    </div>

    <div class="section">
        <label>
            ØªØ¶Ù…ÙŠÙ† â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ:
            <input type="checkbox" id="include-cumulative" checked>
        </label>
    </div>

    <div class="section" id="hifz-section">
        <h2>â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„Ø­ÙØ¸</h2>
        <label>Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©: <input type="text" id="hifz-surah" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©"></label>
        <label>Ù…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: <input type="text" id="hifz-duration" placeholder="Ø³Ø§Ø¹Ø§Øª ÙˆØ¯Ù‚Ø§Ø¦Ù‚"></label>
        <label>Ø¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: <input type="number" id="hifz-repetition" value="10"></label>
        <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: <input type="number" id="hifz-errors" value="0"></label>
        <label>Ø¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: <input type="number" id="hifz-frequency" value="0"></label>
    </div>

    <div class="section" id="cumulative-section">
        <h2>â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</h2>
        <label>Ù…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: <input type="text" id="cumulative-duration" placeholder="Ø³Ø§Ø¹Ø§Øª ÙˆØ¯Ù‚Ø§Ø¦Ù‚"></label>
        <label>Ø§Ù„ØªÙƒØ±Ø§Ø±: <input type="number" id="cumulative-repetition" value="10"></label>
        <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: <input type="number" id="cumulative-errors" value="0"></label>
        <label>Ø¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: <input type="number" id="cumulative-frequency" value="0"></label>
    </div>

    <div class="section">
        <h2>â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ³Ù…ÙŠØ¹</h2>
        <label>Ù…Ø¯Ø© Ø§Ù„ØªØ³Ù…ÙŠØ¹: <input type="text" id="tasmi3-duration" placeholder="Ø³Ø§Ø¹Ø§Øª ÙˆØ¯Ù‚Ø§Ø¦Ù‚"></label>
        <label>ØªÙ… Ø§Ù„Ø³Ù…Ø§Ø¹ Ù„Ù€: <input type="text" id="tasmi3-person" value="Ø³Ù…Ø¹Øª Ø¹Ù„Ù‰ Ø§Ø®ØªÙŠ Ø§Ù„Ù‚Ø±Ø§Ù†ÙŠØ©"></label>
        <h3>Ø§Ù„Ø³ÙˆØ±</h3>
        <div id="surahs">
            <!-- Add surahs dynamically -->
        </div>
    </div>

    <div class="section">
        <h2>ğŸ’ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰</h2>
        <label>ÙˆØ±Ø¯ Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©:
            <input type="radio" name="monthly-completion" value="ØªÙ…" checked> ØªÙ…
            <input type="radio" name="monthly-completion" value="Ù„Ù… ÙŠØªÙ…"> Ù„Ù… ÙŠØªÙ…
        </label>
        <label>Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù‚Ø¨Ù„ÙŠ:
            <input type="radio" name="preparation" value="ØªÙ…" checked> ØªÙ…
            <input type="radio" name="preparation" value="Ù„Ù… ÙŠØªÙ…"> Ù„Ù… ÙŠØªÙ…
        </label>
        <label>ÙˆØ±Ø¯ Ø§Ù„ØªÙØ³ÙŠØ±:
            <input type="radio" name="tafseer" value="ØªÙ…" checked> ØªÙ…
            <input type="radio" name="tafseer" value="Ù„Ù… ÙŠØªÙ…"> Ù„Ù… ÙŠØªÙ…
        </label>
        <label>ÙˆØ±Ø¯ Ø§Ù„Ø£Ø°ÙƒØ§Ø±:
            <input type="radio" name="athkar" value="ØªÙ…" checked> ØªÙ…
            <input type="radio" name="athkar" value="Ù„Ù… ÙŠØªÙ…"> Ù„Ù… ÙŠØªÙ…
        </label>
        <label>ÙˆØ±Ø¯ Ø§Ù„Ù…Ø­Ø±Ø§Ø¨:
            <input type="radio" name="mihrab" value="ØªÙ…" checked> ØªÙ…
            <input type="radio" name="mihrab" value="Ù„Ù… ÙŠØªÙ…"> Ù„Ù… ÙŠØªÙ…
        </label>
    </div>

    <button onclick="handleButtonClick()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙˆÙ†Ø³Ø®Ù‡</button>


    <div id="output" class="output hidden">
        <textarea id="copy-field" readonly></textarea>
    </div>
    <script>

        function decrementValue(index, type) {
            const input = document.querySelector(`.${type}[data-index="${index}"]`);
            if (input) {
                input.value = Math.max(0, parseInt(input.value) - 1);
            }
        }

        function incrementValue(index, type) {
            const input = document.querySelector(`.${type}[data-index="${index}"]`);
            if (input) {
                input.value = parseInt(input.value) + 1;
            }
        }

        let timerInterval;
        let elapsedTime = 0; // Time in seconds
        let isRunning = false;

        // Update the timer display
        function updateTimerDisplay() {
            const hours = String(Math.floor(elapsedTime / 3600)).padStart(2, '0');
            const minutes = String(Math.floor((elapsedTime % 3600) / 60)).padStart(2, '0');
            const seconds = String(elapsedTime % 60).padStart(2, '0');
            document.getElementById('timer').textContent = `${hours}:${minutes}:${seconds}`;
        }

        // Start the timer
        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(() => {
                    elapsedTime++;
                    updateTimerDisplay();
                }, 1000);
            }
        }
        //pause 
        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);

            // Update the pause field with the current timer value
            const hours = String(Math.floor(elapsedTime / 3600)).padStart(2, '0');
            const minutes = String(Math.floor((elapsedTime % 3600) / 60)).padStart(2, '0');
            const seconds = String(elapsedTime % 60).padStart(2, '0');
            document.getElementById('tasmi3-duration').value = `${hours}:${minutes}:${seconds}`;
        }

        // Reset the timer
        function resetTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            elapsedTime = 0;
            updateTimerDisplay();
        }

        // Initialize the timer display
        updateTimerDisplay();



        // Initialize the timer display
        updateTimerDisplay();

        ///////******* end timerrrrrrrrrrrrrrrrr*******////////
        // List of Surahs
        // List of Surahs
        const surahs = [
            { name: "Ø³ÙˆØ±Ø© Ù‚", juz: "Ø¬Ø²Ø¡ 27" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª", juz: "Ø¬Ø²Ø¡ 27" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø·ÙˆØ±", juz: "Ø¬Ø²Ø¡ 27" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø¬Ù…", juz: "Ø¬Ø²Ø¡ 27" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ù…Ø±", juz: "Ø¬Ø²Ø¡ 27" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø±Ø­Ù…Ø§Ù†", juz: "Ø¬Ø²Ø¡ 27" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©", juz: "Ø¬Ø²Ø¡ 27" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø¯ÙŠØ¯", juz: "Ø¬Ø²Ø¡ 27" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©", juz: "Ø¬Ø²Ø¡ 28" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø´Ø±", juz: "Ø¬Ø²Ø¡ 28" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©", juz: "Ø¬Ø²Ø¡ 28" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØµÙ", juz: "Ø¬Ø²Ø¡ 28" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¬Ù…Ø¹Ø©", juz: "Ø¬Ø²Ø¡ 28" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†", juz: "Ø¬Ø²Ø¡ 28" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØªØºØ§Ø¨Ù†", juz: "Ø¬Ø²Ø¡ 28" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø§Ù‚", juz: "Ø¬Ø²Ø¡ 28" },
            { name: "Ø³ÙˆØ±Ø© Ø§Ù„ØªØ­Ø±ÙŠÙ…", juz: "Ø¬Ø²Ø¡ 28" }
        ];


        // Group surahs by juz
        const parts = [];
        surahs.forEach(surah => {
            const juz = surah.juz || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯";  // If juz is null, label as "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"
            let part = parts.find(p => p.name === juz);
            if (!part) {
                part = { name: juz, suras: [] };
                parts.push(part);
            }
            part.suras.push(surah.name);
        });


        function calculateMistakesByJuzAndFrequencies() {
            const mistakesByJuz = {};
            const frequenciesByJuz = {};

            // Loop through surahs to calculate mistakes and frequencies
            surahs.forEach((surah, index) => {
                const errors = parseInt(document.querySelectorAll('.errors')[index]?.value || 0);
                const frequencies = parseInt(document.querySelectorAll('.frequencies')[index]?.value || 0);

                if (surah.juz) {
                    // Initialize `juz` if not already present
                    if (!mistakesByJuz[surah.juz]) {
                        mistakesByJuz[surah.juz] = 0;
                        frequenciesByJuz[surah.juz] = 0;
                    }

                    // Accumulate errors and frequencies
                    mistakesByJuz[surah.juz] += errors;
                    frequenciesByJuz[surah.juz] += frequencies;
                }
            });

            // Combine mistakes and frequencies into one object
            const statsByJuz = {};
            for (const juz in mistakesByJuz) {
                statsByJuz[juz] = {
                    mistakes: mistakesByJuz[juz],
                    frequencies: frequenciesByJuz[juz],
                };
            }

            return statsByJuz;
        }




        const surahContainer = document.getElementById('surahs');

        surahs.forEach((surah, index) => {
            const surahDiv = document.createElement('div');
            surahDiv.innerHTML = `
       <h4>${surah.name}:</h4>
       <label>
         Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: 
         <div style="display: flex; align-items: center; gap: 5px;">
           <button type="button" class="small-button" onclick="decrementValue(${index}, 'errors')">-</button>
           <input type="number" class="errors small-input" data-index="${index}" value="0" min="0">
           <button type="button" class="small-button" onclick="incrementValue(${index}, 'errors')">+</button>
         </div>
       </label>
       <label>
         Ø¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: 
         <div style="display: flex; align-items: center; gap: 5px;">
           <button type="button" class="small-button" onclick="decrementValue(${index}, 'frequencies')">-</button>
           <input type="number" class="frequencies small-input" data-index="${index}" value="0" min="0">
           <button type="button" class="small-button" onclick="incrementValue(${index}, 'frequencies')">+</button>
         </div>
       </label>
   `;
            surahContainer.appendChild(surahDiv);
        });


        document.getElementById('include-hifz').addEventListener('change', function () {
            document.getElementById('hifz-section').classList.toggle('hidden', !this.checked);
        });

        document.getElementById('include-cumulative').addEventListener('change', function () {
            document.getElementById('cumulative-section').classList.toggle('hidden', !this.checked);
        });

        // Show sections on page load if checked
        window.onload = function () {
            if (document.getElementById('include-hifz').checked) {
                document.getElementById('hifz-section').classList.remove('hidden');
            }

            if (document.getElementById('include-cumulative').checked) {
                document.getElementById('cumulative-section').classList.remove('hidden');
            }
        };

        async function generateReport() {
            const dayName = new Date().toLocaleDateString('ar-EG', { weekday: 'long' });
            let output = `ğŸŒ¸ ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ… ${dayName} ğŸŒ¸\n\n`;

            if (document.getElementById('include-hifz').checked) {
                output += `â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„Ø­ÙØ¸:\n`;
                output += `\tØ§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø©: ${document.getElementById('hifz-surah').value}\n`;
                output += `\tÙ…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${document.getElementById('hifz-duration').value}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø±: ${document.getElementById('hifz-repetition').value}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${document.getElementById('hifz-errors').value}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${document.getElementById('hifz-frequency').value}\n\n`;
            }

            if (document.getElementById('include-cumulative').checked) {
                output += `â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ:\n`;
                output += `\tÙ…Ø¯Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${document.getElementById('cumulative-duration').value}\n`;
                output += `\tØ§Ù„ØªÙƒØ±Ø§Ø±: ${document.getElementById('cumulative-repetition').value}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${document.getElementById('cumulative-errors').value}\n`;
                output += `\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${document.getElementById('cumulative-frequency').value}\n\n`;
            }

            output += `â˜‚ï¸ ÙˆØ±Ø¯ Ø§Ù„ØªØ³Ù…ÙŠØ¹:\n`;
            output += `\tÙ…Ø¯Ø© Ø§Ù„ØªØ³Ù…ÙŠØ¹: ${document.getElementById('tasmi3-duration').value}\n`;
            output += `\tØªÙ… Ø§Ù„Ø³Ù…Ø§Ø¹ Ù„Ù€: ${document.getElementById('tasmi3-person').value}\n`;

            // Calculate mistakes by Ø¬Ø²Ø¡
            const mistakesByJuz = { "Ø¬Ø²Ø¡ 1": 0, "Ø¬Ø²Ø¡ 2": 0 };

            surahs.forEach((surah, index) => {
                const errors = parseInt(document.querySelectorAll('.errors')[index].value) || 0;
                const frequencies = document.querySelectorAll('.frequencies')[index].value;

                // Add surah details to the output
                output += `\tğŸ’š ${surah.name}:\n`;
                output += `\t\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${errors}\n`;
                output += `\t\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${frequencies}\n\n`;

                // Accumulate mistakes by Ø¬Ø²Ø¡
                if (surah.juz) {
                    mistakesByJuz[surah.juz] += errors;
                }
            });

            // Add mistakes by Ø¬Ø²Ø¡ to the report
            // Add mistakes and frequencies by Juz to the report
            const statsByJuz = calculateMistakesByJuzAndFrequencies();
            output += `ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø²Ø¡:\n`;

            for (const [juz, stats] of Object.entries(statsByJuz)) {
                output += `\t${juz}:\n`;
                output += `\t\tØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡: ${stats.mistakes}\n`;
                output += `\t\tØ¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª: ${stats.frequencies}\n`;
            }


            output += `\nğŸ’ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰:\n`;
            output += `\tÙˆØ±Ø¯ Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©: ${document.querySelector('input[name="monthly-completion"]:checked').value}\n`;
            output += `\tØ§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù‚Ø¨Ù„ÙŠ: ${document.querySelector('input[name="preparation"]:checked').value}\n`;
            output += `\tÙˆØ±Ø¯ Ø§Ù„ØªÙØ³ÙŠØ±: ${document.querySelector('input[name="tafseer"]:checked').value}\n`;
            output += `\tÙˆØ±Ø¯ Ø§Ù„Ø£Ø°ÙƒØ§Ø±: ${document.querySelector('input[name="athkar"]:checked').value}\n`;
            output += `\tÙˆØ±Ø¯ Ø§Ù„Ù…Ø­Ø±Ø§Ø¨: ${document.querySelector('input[name="mihrab"]:checked').value}\n`;
            output += `\tØ§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ ÙŠØ³Ø± ÙˆØ§Ø¹Ø§Ù† ğŸ¥°\n`;
            // Update the output field and make it visible
            const copyField = document.getElementById('copy-field');
            copyField.value = output;
            document.getElementById('output').classList.remove('hidden');
        }


        function copyToClipboard() {
            const copyField = document.getElementById('copy-field');
            copyField.select();
            document.execCommand('copy');
            alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©!');
        }
        // Handle button click
        async function handleButtonClick() {
            await generateReport(); // Wait for report generation to complete
            copyToClipboard(); // Copy to clipboard after completion
        }

    </script>
    <footer>
        <footer>
            <p>Â© 2025 Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø¨Ø© <strong>Ø¢ÙŠØ© Ø§Ù„Ø±Ø§ÙŠØ³ </strong>ØºÙØ± Ø§Ù„Ù„Ù‡ Ù„Ù‡Ø§.</p>
        </footer>

    </footer>
</body>

</html>