<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูููุฏ ุชูุฑูุฑ ูููู ูู ุจุฑูุงูุฌ ุนุทุงุก </title>
    <link href="style.css" rel="stylesheet" />

</head>

<body>

    <h1>๐ธ ูููุฏ ุชูุฑูุฑ ูููู ๐ธ</h1>
    <div id="container" class="section">
        <h2> ูุคูุช ูุชุณููุน</h2>
        <div id="timer">00:00:00</div>
        <div>
            <button onclick="startTimer()">ุจุฏุฃ</button>
            <button onclick="pauseTimer()">ุงููุงู</button>
            <button onclick="resetTimer()">ุชุตููุฑ</button>
        </div>
    </div>


    <div class="section-toggle">
        <button id="toggle-selection" onclick="toggleSelection()">๐ ุงุฎุชุฑ ุงูุฃุฌุฒุงุก ูุงูุณูุฑ</button>
    </div>

    <div id="selection-section" class="hidden">
        <div class="section">
            <h2>๐ ุงุฎุชุฑ ุงูุฃุฌุฒุงุก ูุงูุณูุฑ</h2>
            <div id="parts-container" class="parts-container">
                <!-- Juz and Surah dropdowns will be dynamically populated here -->
            </div>
        </div>
    </div>



    <div class="section">
        <label>
            ุชุถููู โ๏ธ ูุฑุฏ ุงูุญูุธ:
            <input type="checkbox" id="include-hifz" checked>
        </label>
    </div>

    <div class="section">
        <label>
            ุชุถููู โ๏ธ ูุฑุฏ ุงูุชุฑุงููู:
            <input type="checkbox" id="include-cumulative" checked>
        </label>
    </div>

    <div class="section" id="hifz-section">
        <h2>โ๏ธ ูุฑุฏ ุงูุญูุธ</h2><label>ุงุณู ุงูุณูุฑุฉ: <input type="text" id="hifz-surah"
                placeholder="ุงูุชุจ ุงุณู ุงูุณูุฑุฉ"></label><label>ูุฏุฉ ุงูุชุณุฌูู: <input type="text" id="hifz-duration"
                placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label><label>ุนุฏุฏ ุงูุชูุฑุงุฑ: <input type="number" id="hifz-repetition"
                value="10"></label><label>ุนุฏุฏ ุงูุฃุฎุทุงุก: <input type="number" id="hifz-errors"
                value="0"></label><label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช: <input type="number" id="hifz-frequency" value="0"></label>
    </div>
    <div class="section" id="cumulative-section">
        <h2>โ๏ธ ูุฑุฏ ุงูุชุฑุงููู</h2><label>ูุฏุฉ ุงูุชุณุฌูู: <input type="text" id="cumulative-duration"
                placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label><label>ุงูุชูุฑุงุฑ: <input type="number" id="cumulative-repetition"
                value="10"></label><label>ุนุฏุฏ ุงูุฃุฎุทุงุก: <input type="number" id="cumulative-errors"
                value="0"></label><label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช: <input type="number" id="cumulative-frequency" value="0"></label>
    </div>
    <div class="section" id="ghaybi-section">
        <h2>โ๏ธ ูุฑุฏ ุงูุบูุจู</h2>
        <label>ูุฏุฉ ุงูุชุณุฌูู: <input type="text" id="ghaybi-duration" placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label>
        <label>ุนุฏุฏ ุงูุฃุฎุทุงุก: <input type="number" id="ghaybi-errors" value="0"></label>
        <label id="errors-surah-label" style="display: none;">ุงุณู ุงูุณูุฑุฉ : <input type="text"
                id="ghaybi-errors-surah"></label>
        <label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช: <input type="number" id="ghaybi-frequency" value="0"></label>
        <label id="frequency-surah-label" style="display: none;">ุงุณู ุงูุณูุฑุฉ : <input type="text"
                id="ghaybi-frequency-surah"></label>
    </div>
    <div class="section">
        <h2>โ๏ธ ูุฑุฏ ุงูุชุณููุน</h2><label>ูุฏุฉ ุงูุชุณููุน: <input type="text" id="tasmi3-duration"
                placeholder="ุณุงุนุงุช ูุฏูุงุฆู"></label><label>ุชู ุงูุณูุงุน ูู: <input type="text" id="tasmi3-person"
                value="ุณูุนุช ุนูู ุงุฎุชู ุงููุฑุงููุฉ"></label>
        <h3>ุงูุณูุฑ</h3>
        <div id="selected-details">
            <!-- Selected Surah/Juz details will appear here -->
        </div>
    </div>


    <div class="section">
        <h2>๐ ุงูููุงู ุงูุฃุฎุฑู</h2><label>ูุฑุฏ ุงูุฎุชูุฉ ุงูุดูุฑูุฉ: <input type="radio" name="monthly-completion" value="ุชู"
                checked>ุชู <input type="radio" name="monthly-completion" value="ูู ูุชู">ูู ูุชู </label><label>ุงูุชุญุถูุฑ
            ุงููุจูู: <input type="radio" name="preparation" value="ุชู" checked>ุชู <input type="radio" name="preparation"
                value="ูู ูุชู">ูู ูุชู </label><label>ูุฑุฏ ุงูุชูุณูุฑ: <input type="radio" name="tafseer" value="ุชู"
                checked>ุชู <input type="radio" name="tafseer" value="ูู ูุชู">ูู ูุชู </label><label>ูุฑุฏ ุงูุฃุฐูุงุฑ: <input
                type="radio" name="athkar" value="ุชู" checked>ุชู <input type="radio" name="athkar" value="ูู ูุชู">ูู ูุชู
        </label><label>ูุฑุฏ ุงููุญุฑุงุจ: <input type="radio" name="mihrab" value="ุชู" checked>ุชู <input type="radio"
                name="mihrab" value="ูู ูุชู">ูู ูุชู </label>
    </div><button onclick="handleButtonClick()">ุฅูุดุงุก ุงูุชูุฑูุฑ ููุณุฎู</button>
    <div id="output" class="output hidden"><textarea id="copy-field" readonly></textarea></div>

    <script>
        // List of Surahs
        const surahs = [{ name: "ุณูุฑุฉ ู", juz: "ุฌุฒุก 27" },
        { name: "ุณูุฑุฉ ุงูุฐุงุฑูุงุช", juz: "ุฌุฒุก 27" },
        { name: "ุณูุฑุฉ ุงูุทูุฑ", juz: "ุฌุฒุก 27" },
        { name: "ุณูุฑุฉ ุงููุฌู", juz: "ุฌุฒุก 27" },
        { name: "ุณูุฑุฉ ุงูููุฑ", juz: "ุฌุฒุก 27" },
        { name: "ุณูุฑุฉ ุงูุฑุญูุงู", juz: "ุฌุฒุก 27" },
        { name: "ุณูุฑุฉ ุงููุงูุนุฉ", juz: "ุฌุฒุก 27" },
        { name: "ุณูุฑุฉ ุงูุญุฏูุฏ", juz: "ุฌุฒุก 27" },
        { name: "ุณูุฑุฉ ุงููุฌุงุฏูุฉ", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูุญุดุฑ", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูููุชุญูุฉ", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูุตู", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูุฌูุนุฉ", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูููุงูููู", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูุชุบุงุจู", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูุทูุงู", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูุชุญุฑูู", juz: "ุฌุฒุก 28" },
        { name: "ุณูุฑุฉ ุงูููู", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงูููู", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงูุญุงูุฉ", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงููุนุงุฑุฌ", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ููุญ", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงูุฌู", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงููุฒูู", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงููุฏุซุฑ", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงูููุงูุฉ", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงูุฅูุณุงู", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงููุฑุณูุงุช", juz: "ุฌุฒุก 29" },
        { name: "ุณูุฑุฉ ุงููุจุฃ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุงุฒุนุงุช", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุนุจุณ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุชูููุฑ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุฅููุทุงุฑ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุทูููู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุงูุดูุงู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุจุฑูุฌ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุทุงุฑู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุฃุนูู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุบุงุดูุฉ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุฌุฑ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุจูุฏ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุดูุณ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูููู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุถุญู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุดุฑุญ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุชูู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุนูู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุฏุฑ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุจููุฉ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุฒูุฒูุฉ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุนุงุฏูุงุช", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุงุฑุนุฉ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุชูุงุซุฑ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุนุตุฑ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูููุฒุฉ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูููู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ูุฑูุด", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุงุนูู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูููุซุฑ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุงูุฑูู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุตุฑ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุณุฏ", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูุฅุฎูุงุต", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงูููู", juz: "ุฌุฒุก 30" },
        { name: "ุณูุฑุฉ ุงููุงุณ", juz: "ุฌุฒุก 30" }
        ];

        const errorsInput = document.getElementById('ghaybi-errors');
        const frequencyInput = document.getElementById('ghaybi-frequency');
        const errorsSurahLabel = document.getElementById('errors-surah-label');
        const frequencySurahLabel = document.getElementById('frequency-surah-label');

        // Function to toggle the visibility of the "ุงุณู ุงูุณูุฑุฉ" fields
        function toggleSurahFields() {
            if (errorsInput.value > 0) {
                errorsSurahLabel.style.display = 'block';
            } else {
                errorsSurahLabel.style.display = 'none';
            }

            if (frequencyInput.value > 0) {
                frequencySurahLabel.style.display = 'block';
            } else {
                frequencySurahLabel.style.display = 'none';
            }
        }

        // Attach event listeners to the inputs to call the toggle function when values change
        errorsInput.addEventListener('input', toggleSurahFields);
        frequencyInput.addEventListener('input', toggleSurahFields);

        // Initialize visibility on page load
        toggleSurahFields();
        function toggleSelection() {
            const selectionSection = document.getElementById("selection-section");
            const toggleButton = document.getElementById("toggle-selection");
            if (selectionSection.classList.contains("hidden")) {
                selectionSection.classList.remove("hidden");
                toggleButton.textContent = "๐ฝ ุฅุฎูุงุก ุงูุฃุฌุฒุงุก ูุงูุณูุฑ";
            } else {
                selectionSection.classList.add("hidden");
                toggleButton.textContent = "๐ ุงุฎุชุฑ ุงูุฃุฌุฒุงุก ูุงูุณูุฑ";
            }
        }

        // Group Surahs by Juz
        const groupedSurahs = surahs.reduce((acc, surah) => {
            if (!acc[surah.juz]) acc[surah.juz] = [];
            acc[surah.juz].push(surah.name);
            return acc;
        }, {});

        const partsContainer = document.getElementById("parts-container");

        // Generate Juz dynamically from Juz 1 to Juz 30
        for (let i = 1; i <= 30; i++) {
            const juz = `ุฌุฒุก ${i}`;
            if (groupedSurahs[juz]) {
                const partDiv = document.createElement("div");
                partDiv.className = "part";

                // Juz Header
                const partHeader = document.createElement("div");
                partHeader.className = "part-header";
                partHeader.innerHTML = `
                <input type="checkbox" id="juz-${i}" ${i === 27 || i === 28 ? "checked" : ""} onchange="toggleJuzSelection(${i}, '${juz}', this.checked)" />
                <label for="juz-${i}">${juz}</label>
                <button class="expand-btn" onclick="toggleDropdown(${i})">โฌ๏ธ</button>
            `;

                // Dropdown Container
                const surasDiv = document.createElement("div");
                surasDiv.className = "suras-dropdown";
                surasDiv.id = `suras-${i}`;
                surasDiv.style.display = "none";

                // Add Surah Checkboxes
                groupedSurahs[juz].forEach((sura, suraIndex) => {
                    // Skip Surahs with invalid names or empty values
                    if (!sura || sura.trim() === "") return;

                    const suraRow = document.createElement("div");
                    suraRow.className = "sura-row";

                    const suraCheckbox = document.createElement("input");
                    suraCheckbox.type = "checkbox";
                    suraCheckbox.id = `sura-${i}-${suraIndex}`;
                    suraCheckbox.value = sura;  // Ensure the sura name is properly set
                    suraCheckbox.checked = i === 27 || i === 28; // Check by default for Juz 1 and Juz 2
                    suraCheckbox.onclick = () => toggleSurahDetails(sura, suraCheckbox.checked, i); // Pass Juz number

                    const suraLabel = document.createElement("label");
                    suraLabel.htmlFor = `sura-${i}-${suraIndex}`;
                    suraLabel.textContent = sura;

                    suraRow.appendChild(suraCheckbox);
                    suraRow.appendChild(suraLabel);
                    surasDiv.appendChild(suraRow);
                });


                partDiv.appendChild(partHeader);
                partDiv.appendChild(surasDiv);
                partsContainer.appendChild(partDiv);
            }
        }

        // Toggle dropdown visibility
        function toggleDropdown(i) {
            const dropdown = document.getElementById(`suras-${i}`);
            dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
        }




        // Select or Deselect all Surahs in a Juz
        function toggleJuzSelection(i, juz, select) {
            const surasDiv = document.getElementById(`suras-${i}`);
            const checkboxes = surasDiv.querySelectorAll("input[type=checkbox]");

            checkboxes.forEach((checkbox) => {
                checkbox.checked = select;
                toggleSurahDetails(checkbox.value, checkbox.checked); // Call to show/hide Surah details
            });

            // If Juz is deselected, hide all Surah details in that Juz
            if (!select) {
                groupedSurahs[juz].forEach(sura => {
                    toggleSurahDetails(sura, false); // Remove details for each Surah in this Juz
                });
                surasDiv.style.display = "none"; // Hide the dropdown for this Juz
            } else {
                surasDiv.style.display = "block"; // Show the dropdown for this Juz
            }
        }


        function changeValue(surahName, type, action) {
            const inputField = document.querySelector(`.${type}[data-surah='${surahName}']`); // Select the correct input based on the type ('errors' or 'frequencies')
            let currentValue = parseInt(inputField.value);
            if (action === 'increment') {
                currentValue += 1;
            } else if (action === 'decrement' && currentValue > 0) {
                currentValue -= 1;
            }
            inputField.value = currentValue;
        }

        // Function to toggle Surah details
        function toggleSurahDetails(surahName, showDetails, juz = "ุบูุฑ ูุญุฏุฏ") {
            if (!surahName || surahName === "on") return;
            const selectedDetailsDiv = document.getElementById("selected-details");
            const existingDetail = document.getElementById(`detail-${surahName}`);

            if (showDetails) {
                if (!existingDetail) {
                    const detailDiv = document.createElement("div");
                    detailDiv.id = `detail-${surahName}`;
                    detailDiv.dataset.juz = juz;
                    detailDiv.innerHTML = `
                <h4>${surahName}:</h4>
                <label>ุนุฏุฏ ุงูุฃุฎุทุงุก:</label>
                <button type="button" class="small-button" onclick="changeValue('${surahName}', 'errors', 'decrement')">-</button>
                <input type="number" class="errors small-input" data-surah="${surahName}" value="0" min="0">
                <button type="button" class="small-button" onclick="changeValue('${surahName}', 'errors', 'increment')">+</button>
                <br>
                <label>ุนุฏุฏ ุงูุชุฑุฏุฏุงุช:</label>
                <button type="button" class="small-button" onclick="changeValue('${surahName}', 'frequencies', 'decrement')">-</button>
                <input type="number" class="frequencies small-input" data-surah="${surahName}" value="0">
                <button type="button" class="small-button" onclick="changeValue('${surahName}', 'frequencies', 'increment')">+</button>
            `;
                    selectedDetailsDiv.appendChild(detailDiv);
                }
            } else {
                if (existingDetail) {
                    existingDetail.remove();
                }
            }
        }

        // Call displaySurahDetails for default checked Surahs on page load
        window.onload = function () {
            document.querySelectorAll("input[type=checkbox]:checked").forEach((checkbox) => {
                toggleSurahDetails(checkbox.value, true);
            });
        }
        async function generateReport() {
            const dayName = new Date().toLocaleDateString('ar-EG', { weekday: 'long' });

            let output = `๐ธ ุชูุฑูุฑ ููู ${dayName} ๐ธ\n\n`;

            // Track processed surahs to avoid duplication
            const processedSurahs = new Set();

            // Initialize an object to store cumulative totals for mistakes and frequencies per Juz


            // Include ูุฑุฏ ุงูุญูุธ section if checked
            if (document.getElementById('include-hifz').checked) {
                output += `โ๏ธ ูุฑุฏ ุงูุญูุธ:\n`;
                output += `\tุงุณู ุงูุณูุฑุฉ: ${document.getElementById('hifz-surah').value || "ุบูุฑ ูุญุฏุฏ"}\n`;
                output += `\tูุฏุฉ ุงูุชุณุฌูู: ${document.getElementById('hifz-duration').value || "ุบูุฑ ูุญุฏุฏุฉ"}\n`;
                output += `\tุนุฏุฏ ุงูุชูุฑุงุฑ: ${document.getElementById('hifz-repetition').value || "0"}\n`;
                output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${document.getElementById('hifz-errors').value || "0"}\n`;
                output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${document.getElementById('hifz-frequency').value || "0"}\n\n`;
            }

            // Include ูุฑุฏ ุงูุชุฑุงููู section if checked
            if (document.getElementById('include-cumulative').checked) {
                output += `โ๏ธ ูุฑุฏ ุงูุชุฑุงููู:\n`;
                output += `\tูุฏุฉ ุงูุชุณุฌูู: ${document.getElementById('cumulative-duration').value || "ุบูุฑ ูุญุฏุฏุฉ"}\n`;
                output += `\tุงูุชูุฑุงุฑ: ${document.getElementById('cumulative-repetition').value || "0"}\n`;
                output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${document.getElementById('cumulative-errors').value || "0"}\n`;
                output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${document.getElementById('cumulative-frequency').value || "0"}\n\n`;
            }

            output += `โ๏ธ ูุฑุฏ ุงูุบูุจู:\n`;
            output += `\tูุฏุฉ ุงูุชุณุฌูู: ${document.getElementById('ghaybi-duration').value}\n`;
            output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${document.getElementById('ghaybi-errors').value}\n`;

            // Check if the "ุงุณู ุงูุณูุฑุฉ" for ุงูุฃุฎุทุงุก should be included
            if (document.getElementById('ghaybi-errors').value > 0) {
                output += `\tุงุณู ุงูุณูุฑุฉ ููุฃุฎุทุงุก: ${document.getElementById('ghaybi-errors-surah').value}\n`;
            }

            output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${document.getElementById('ghaybi-frequency').value}\n`;

            // Check if the "ุงุณู ุงูุณูุฑุฉ" for ุงูุชุฑุฏุฏุงุช should be included
            if (document.getElementById('ghaybi-frequency').value > 0) {
                output += `\tุงุณู ุงูุณูุฑุฉ ููุชุฑุฏุฏุงุช: ${document.getElementById('ghaybi-frequency-surah').value}\n`;
            }

            output += `\n`;

            // Include ูุฑุฏ ุงูุชุณููุน section
            output += `โ๏ธ ูุฑุฏ ุงูุชุณููุน:\n`;
            output += `\tูุฏุฉ ุงูุชุณููุน: ${document.getElementById('tasmi3-duration').value || "ุบูุฑ ูุญุฏุฏุฉ"}\n`;
            output += `\tุชู ุงูุณูุงุน ูู: ${document.getElementById('tasmi3-person').value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            const cumulativeTotals = {};

            // Loop through each Juz and include details for all surahs
            Object.keys(groupedSurahs).forEach((juz) => {
                const surahsInJuz = groupedSurahs[juz];
                let totalMistakes = 0;
                let totalFrequencies = 0;

                surahsInJuz.forEach((surahName) => {
                    // Check if the surah has already been processed
                    if (!processedSurahs.has(surahName)) {
                        const detailDiv = document.getElementById(`detail-${surahName}`);
                        if (detailDiv) {
                            const mistakes = parseInt(detailDiv.querySelector('.errors').value) || 0;
                            const frequencies = parseInt(detailDiv.querySelector('.frequencies').value) || 0;

                            // Add Surah details to the report
                            output += `\t๐ ${surahName} :\n`;
                            output += `\t\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${mistakes}\n`;
                            output += `\t\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${frequencies}\n\n`;

                            // Update cumulative totals for this Juz
                            totalMistakes += mistakes;
                            totalFrequencies += frequencies;

                            // Mark this surah as processed
                            processedSurahs.add(surahName);
                        }
                    }
                });

                // Store the cumulative totals for each Juz
                if (totalMistakes > 0 || totalFrequencies > 0) {
                    cumulativeTotals[juz] = {
                        mistakes: totalMistakes,
                        frequencies: totalFrequencies,
                    };
                }
            });
            // Include cumulative totals per Juz
            output += `\n๐ ุฅุฌูุงูู ุงูุฃุฎุทุงุก ูุงูุชุฑุฏุฏุงุช ุญุณุจ ุงูุฌุฒุก:\n`;

            Object.keys(cumulativeTotals).forEach((juz) => {
                const totals = cumulativeTotals[juz];

                // Always show statistics, even if they are zero
                output += `\n${juz}:\n`;
                output += `\tุนุฏุฏ ุงูุฃุฎุทุงุก: ${totals.mistakes || 0}\n`;
                output += `\tุนุฏุฏ ุงูุชุฑุฏุฏุงุช: ${totals.frequencies || 0}\n`;
            });

            // If no data exists in cumulativeTotals, still show "0" for every Juz
            if (Object.keys(cumulativeTotals).length === 0) {
                output += `\t ูุง ุชูุฌุฏ ุฃุฌุฒุงุก ูุณุฌูุฉ ุจุฃุฎุทุงุก ุฃู ุชุฑุฏุฏุงุช ูู ุงูุชุณููุน ๐ฅฐ`;
            }
            output += `\n`;
            // Include ุงูููุงู ุงูุฃุฎุฑู section
            output += `\n๐ ุงูููุงู ุงูุฃุฎุฑู:\n`;
            output += `\tูุฑุฏ ุงูุฎุชูุฉ ุงูุดูุฑูุฉ: ${document.querySelector('input[name="monthly-completion"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            output += `\tุงูุชุญุถูุฑ ุงููุจูู: ${document.querySelector('input[name="preparation"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            output += `\tูุฑุฏ ุงูุชูุณูุฑ: ${document.querySelector('input[name="tafseer"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            output += `\tูุฑุฏ ุงูุฃุฐูุงุฑ: ${document.querySelector('input[name="athkar"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            output += `\tูุฑุฏ ุงููุญุฑุงุจ: ${document.querySelector('input[name="mihrab"]:checked')?.value || "ุบูุฑ ูุญุฏุฏ"}\n`;
            output += `\n`;
            output += `\tุงูุญูุฏ ููู ุงูุฐู ูุณุฑ ูุงุนุงู ๐ฅฐ\n`;

            // Display the report in the textarea
            const copyField = document.getElementById('copy-field');
            copyField.value = output;
            document.getElementById('output').classList.remove('hidden');
        }


        // Handle button click
        async function handleButtonClick() {
            await generateReport(); // Wait for report generation to complete
            copyToClipboard(); // Copy to clipboard after completion
        }
        console.log(`Surah: ${surahName}, Errors: ${errors}, Frequencies: ${frequencies}`);


    </script>
    <footer>
        <footer>
            <p>ยฉ 2025 ุจุฑูุฌุฉ ุงูุทูููุจุฉ <strong>ุขูุฉ ุงูุฑุงูุณ </strong>ุบูุฑ ุงููู ููุง.</p>
        </footer>
    </footer>
</body>

</html>